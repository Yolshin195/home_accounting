<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Календарь финансов - Домашняя бухгалтерия</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #5c6ac4;
            --primary-light: #f5f7ff;
            --primary-dark: #4c5aa9;
            --secondary-color: #6b7280;
            --success-color: #10b981;
            --success-light: rgba(16, 185, 129, 0.1);
            --danger-color: #ef4444;
            --danger-light: rgba(239, 68, 68, 0.1);
            --warning-color: #f59e0b;
            --warning-light: rgba(245, 158, 11, 0.1);
            --dark-color: #111827;
            --light-color: #f9fafb;
            --border-color: #e5e7eb;
            --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            --transition: all 0.2s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            color: var(--dark-color);
            background-color: #f3f4f6;
            line-height: 1.5;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        .header {
            background-color: white;
            box-shadow: var(--card-shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-inner {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .brand-icon {
            font-size: 1.75rem;
            color: var(--primary-color);
        }

        .brand-title {
            font-weight: 600;
            font-size: 1.25rem;
            color: var(--dark-color);
            margin: 0;
        }

        .navigation {
            display: flex;
            align-items: center;
        }

        .nav-list {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: 0.5rem;
        }

        .nav-item a {
            display: block;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            text-decoration: none;
            color: var(--secondary-color);
            font-weight: 500;
            transition: var(--transition);
        }

        .nav-item a:hover {
            background-color: var(--primary-light);
            color: var(--primary-color);
        }

        .nav-item a.active {
            background-color: var(--primary-color);
            color: white;
        }

        .language-selector {
            display: flex;
            margin-left: 1rem;
        }

        .language-btn {
            background: none;
            border: none;
            padding: 0.25rem;
            border-radius: 0.25rem;
            opacity: 0.6;
            transition: var(--transition);
        }

        .language-btn.active {
            opacity: 1;
            border: 2px solid var(--primary-color);
        }

        .language-btn:hover {
            opacity: 1;
            background-color: var(--primary-light);
        }

        .lang-text {
            font-weight: 600;
            font-size: 0.875rem;
        }

        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--dark-color);
            font-size: 1.5rem;
            cursor: pointer;
        }

        .mobile-menu-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        @media (min-width: 769px) {
            .mobile-menu-close {
                display: none;
            }
        }

        .page-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--dark-color);
        }

        .page-subtitle {
            font-size: 1.125rem;
            color: var(--secondary-color);
            margin-bottom: 2rem;
        }

        .card {
            background-color: white;
            border-radius: 1rem;
            box-shadow: var(--card-shadow);
            border: none;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }

        .card-header {
            background-color: white;
            border-bottom: 1px solid var(--border-color);
            padding: 1.25rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0;
            color: var(--dark-color);
        }

        .card-body {
            padding: 1.5rem;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-weight: 500;
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            text-decoration: none;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            color: white;
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background-color: #0da571;
            color: white;
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }

        .btn-outline:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }

        .btn-danger:hover {
            background-color: #e02424;
            color: white;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        .form-label {
            font-weight: 500;
            margin-bottom: 0.5rem;
            display: block;
        }

        .form-control {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(92, 106, 196, 0.1);
        }

        .form-select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: var(--transition);
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 16px 12px;
            appearance: none;
        }

        .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(92, 106, 196, 0.1);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-check {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .form-check-input {
            width: 1.25rem;
            height: 1.25rem;
            margin-top: 0;
            border: 1px solid var(--border-color);
            border-radius: 0.25rem;
            transition: var(--transition);
        }

        .form-check-input:checked {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .form-check-label {
            font-size: 1rem;
            color: var(--dark-color);
        }

        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.35rem 0.65rem;
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: 0.375rem;
        }

        .badge-success {
            background-color: var(--success-light);
            color: var(--success-color);
        }

        .badge-danger {
            background-color: var(--danger-light);
            color: var(--danger-color);
        }

        .badge-warning {
            background-color: var(--warning-light);
            color: var(--warning-color);
        }

        .badge-primary {
            background-color: var(--primary-light);
            color: var(--primary-color);
        }

        .modal-content {
            border-radius: 1rem;
            border: none;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
        }

        .modal-header {
            border-bottom: 1px solid var(--border-color);
            padding: 1.25rem 1.5rem;
        }

        .modal-title {
            font-weight: 600;
            font-size: 1.25rem;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            border-top: 1px solid var(--border-color);
            padding: 1.25rem 1.5rem;
        }

        .btn-close {
            background: transparent url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23000'%3e%3cpath d='M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z'/%3e%3c/svg%3e") center/1em auto no-repeat;
            opacity: 0.5;
            transition: var(--transition);
        }

        .btn-close:hover {
            opacity: 0.75;
        }

        .footer {
            background-color: white;
            border-top: 1px solid var(--border-color);
            padding: 1.5rem 0;
            margin-top: 3rem;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .footer-links {
            display: flex;
            gap: 1.5rem;
        }

        .footer-link {
            color: var(--secondary-color);
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-link:hover {
            color: var(--primary-color);
        }

        .footer-copyright {
            color: var(--secondary-color);
            font-size: 0.875rem;
        }

        /* Календарь */
        .calendar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .calendar-title {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .calendar-nav {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .calendar-nav-btn {
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            background-color: var(--light-color);
            color: var(--dark-color);
            border: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .calendar-nav-btn:hover {
            background-color: var(--primary-light);
            color: var(--primary-color);
        }

        .calendar-today-btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            background-color: var(--primary-light);
            color: var(--primary-color);
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .calendar-today-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
        }

        .calendar-weekday {
            text-align: center;
            font-weight: 600;
            color: var(--secondary-color);
            padding: 0.5rem;
        }

        .calendar-day {
            position: relative;
            min-height: 120px;
            background-color: white;
            border-radius: 0.5rem;
            padding: 0.5rem;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }

        .calendar-day:hover {
            box-shadow: var(--card-shadow);
            border-color: var(--primary-color);
        }

        .calendar-day.active {
            border-color: var(--primary-color);
            background-color: var(--primary-light);
        }

        .calendar-day.other-month {
            opacity: 0.5;
        }

        .calendar-day.today {
            background-color: var(--primary-light);
        }

        .calendar-day-number {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .calendar-day-content {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .calendar-transaction {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .calendar-transaction.income {
            background-color: var(--success-light);
            color: var(--success-color);
        }

        .calendar-transaction.expense {
            background-color: var(--danger-light);
            color: var(--danger-color);
        }

        .calendar-day-summary {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            margin-top: 0.5rem;
            padding-top: 0.5rem;
            border-top: 1px dashed var(--border-color);
        }

        .calendar-day-income {
            color: var(--success-color);
        }

        .calendar-day-expense {
            color: var(--danger-color);
        }

        .calendar-add-btn {
            position: absolute;
            bottom: 0.5rem;
            right: 0.5rem;
            width: 1.5rem;
            height: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            border: none;
            font-size: 0.75rem;
            cursor: pointer;
            transition: var(--transition);
            opacity: 0;
        }

        .calendar-day:hover .calendar-add-btn {
            opacity: 1;
        }

        .calendar-add-btn:hover {
            transform: scale(1.1);
        }

        .day-details {
            display: none;
        }

        .day-details.active {
            display: block;
        }

        .transaction-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .transaction-item {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            border-bottom: 1px solid var(--border-color);
        }

        .transaction-item:last-child {
            border-bottom: none;
        }

        .transaction-icon {
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.75rem;
            margin-right: 1rem;
            font-size: 1.25rem;
        }

        .transaction-icon-income {
            background-color: var(--success-light);
            color: var(--success-color);
        }

        .transaction-icon-expense {
            background-color: var(--danger-light);
            color: var(--danger-color);
        }

        .transaction-info {
            flex: 1;
        }

        .transaction-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .transaction-category {
            font-size: 0.875rem;
            color: var(--secondary-color);
        }

        .transaction-amount {
            font-weight: 600;
        }

        .transaction-amount.income {
            color: var(--success-color);
        }

        .transaction-amount.expense {
            color: var(--danger-color);
        }

        .summary-card {
            background-color: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: var(--card-shadow);
            display: flex;
            flex-direction: column;
            margin-bottom: 1rem;
        }

        .summary-title {
            font-size: 0.875rem;
            color: var(--secondary-color);
            margin-bottom: 0.5rem;
        }

        .summary-value {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .summary-value.income {
            color: var(--success-color);
        }

        .summary-value.expense {
            color: var(--danger-color);
        }

        .summary-value.balance {
            color: var(--primary-color);
        }

        .view-selector {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .view-btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            background-color: var(--light-color);
            color: var(--secondary-color);
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .view-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        .view-btn:hover:not(.active) {
            background-color: var(--primary-light);
            color: var(--primary-color);
        }

        @media (max-width: 992px) {
            .page-title {
                font-size: 1.75rem;
            }

            .calendar-day {
                min-height: 100px;
            }
        }

        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
            }

            .navigation {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                background-color: white;
                flex-direction: column;
                justify-content: center;
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                z-index: 1000;
            }

            .navigation.active {
                transform: translateX(0);
            }

            .nav-list {
                flex-direction: column;
                align-items: center;
                gap: 1rem;
            }

            .nav-item a {
                font-size: 1.25rem;
                padding: 0.75rem 2rem;
            }

            .language-selector {
                margin: 2rem 0 0;
            }

            .calendar-grid {
                grid-template-columns: repeat(1, 1fr);
            }

            .calendar-weekday {
                display: none;
            }

            .calendar-day {
                min-height: auto;
                padding: 1rem;
            }

            .calendar-day-number {
                display: inline-block;
                margin-right: 0.5rem;
            }

            .calendar-day-number::after {
                content: attr(data-weekday);
                font-weight: normal;
                color: var(--secondary-color);
                margin-left: 0.5rem;
            }

            .footer-content {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .footer-links {
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        @media (max-width: 576px) {
            .calendar-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .calendar-nav {
                width: 100%;
                justify-content: space-between;
            }

            .view-selector {
                width: 100%;
                overflow-x: auto;
                padding-bottom: 0.5rem;
            }

            .view-btn {
                white-space: nowrap;
            }
        }
    </style>
</head>
<body>
    {% with active_page='calendar' %}
        {% include "navbar.html.jinja2" %}
    {% endwith %}

    <main class="container" style="padding-top: 2rem; padding-bottom: 2rem;">
        <h1 class="page-title" data-lang="calendar_title">Календарь финансов</h1>
        <p class="page-subtitle" data-lang="calendar_subtitle">Отслеживайте доходы и расходы по дням, неделям и месяцам</p>

        <div class="view-selector">
            <button class="view-btn" data-view="day" data-lang="calendar_view_day">День</button>
            <button class="view-btn active" data-view="month" data-lang="calendar_view_month">Месяц</button>
            <button class="view-btn" data-view="week" data-lang="calendar_view_week">Неделя</button>
            <button class="view-btn" data-view="year" data-lang="calendar_view_year">Год</button>
        </div>

        <div class="row">
            <div class="col-lg-9">
                <div class="card">
                    <div class="card-body">
                        <div class="calendar-header">
                            <div class="calendar-title" id="calendarTitle">Май 2025</div>
                            <div class="calendar-nav">
                                <button class="calendar-nav-btn" id="prevMonth">
                                    <i class="bi bi-chevron-left"></i>
                                </button>
                                <button class="calendar-today-btn" id="todayBtn" data-lang="calendar_today">Сегодня</button>
                                <button class="calendar-nav-btn" id="nextMonth">
                                    <i class="bi bi-chevron-right"></i>
                                </button>
                            </div>
                        </div>

                        <div class="calendar-grid">
                            <div class="calendar-weekday" data-lang="calendar_weekday_mon">Пн</div>
                            <div class="calendar-weekday" data-lang="calendar_weekday_tue">Вт</div>
                            <div class="calendar-weekday" data-lang="calendar_weekday_wed">Ср</div>
                            <div class="calendar-weekday" data-lang="calendar_weekday_thu">Чт</div>
                            <div class="calendar-weekday" data-lang="calendar_weekday_fri">Пт</div>
                            <div class="calendar-weekday" data-lang="calendar_weekday_sat">Сб</div>
                            <div class="calendar-weekday" data-lang="calendar_weekday_sun">Вс</div>

                            <!-- Дни предыдущего месяца -->
                            <div class="calendar-day other-month" data-date="2025-04-28">
                                <div class="calendar-day-number" data-weekday="Пн">28</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day other-month" data-date="2025-04-29">
                                <div class="calendar-day-number" data-weekday="Вт">29</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day other-month" data-date="2025-04-30">
                                <div class="calendar-day-number" data-weekday="Ср">30</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>

                            <!-- Дни текущего месяца -->
                            <div class="calendar-day" data-date="2025-05-01">
                                <div class="calendar-day-number" data-weekday="Чт">1</div>
                                <div class="calendar-day-content">
                                    <div class="calendar-transaction expense">
                                        <i class="bi bi-cart"></i>
                                        <span>Продукты</span>
                                    </div>
                                </div>
                                <div class="calendar-day-summary">
                                    <div class="calendar-day-expense">-2 500 ₽</div>
                                </div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-02">
                                <div class="calendar-day-number" data-weekday="Пт">2</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-03">
                                <div class="calendar-day-number" data-weekday="Сб">3</div>
                                <div class="calendar-day-content">
                                    <div class="calendar-transaction expense">
                                        <i class="bi bi-cup-hot"></i>
                                        <span>Кафе</span>
                                    </div>
                                </div>
                                <div class="calendar-day-summary">
                                    <div class="calendar-day-expense">-1 200 ₽</div>
                                </div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-04">
                                <div class="calendar-day-number" data-weekday="Вс">4</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-05">
                                <div class="calendar-day-number" data-weekday="Пн">5</div>
                                <div class="calendar-day-content">
                                    <div class="calendar-transaction expense">
                                        <i class="bi bi-car-front"></i>
                                        <span>Такси</span>
                                    </div>
                                </div>
                                <div class="calendar-day-summary">
                                    <div class="calendar-day-expense">-450 ₽</div>
                                </div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-06">
                                <div class="calendar-day-number" data-weekday="Вт">6</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-07">
                                <div class="calendar-day-number" data-weekday="Ср">7</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-08">
                                <div class="calendar-day-number" data-weekday="Чт">8</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-09">
                                <div class="calendar-day-number" data-weekday="Пт">9</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-10">
                                <div class="calendar-day-number" data-weekday="Сб">10</div>
                                <div class="calendar-day-content">
                                    <div class="calendar-transaction income">
                                        <i class="bi bi-briefcase"></i>
                                        <span>Зарплата</span>
                                    </div>
                                </div>
                                <div class="calendar-day-summary">
                                    <div class="calendar-day-income">+75 000 ₽</div>
                                </div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-11">
                                <div class="calendar-day-number" data-weekday="Вс">11</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-12">
                                <div class="calendar-day-number" data-weekday="Пн">12</div>
                                <div class="calendar-day-content">
                                    <div class="calendar-transaction expense">
                                        <i class="bi bi-house"></i>
                                        <span>Аренда</span>
                                    </div>
                                </div>
                                <div class="calendar-day-summary">
                                    <div class="calendar-day-expense">-30 000 ₽</div>
                                </div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-13">
                                <div class="calendar-day-number" data-weekday="Вт">13</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-14">
                                <div class="calendar-day-number" data-weekday="Ср">14</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-15">
                                <div class="calendar-day-number" data-weekday="Чт">15</div>
                                <div class="calendar-day-content">
                                    <div class="calendar-transaction expense">
                                        <i class="bi bi-cart"></i>
                                        <span>Продукты</span>
                                    </div>
                                </div>
                                <div class="calendar-day-summary">
                                    <div class="calendar-day-expense">-3 200 ₽</div>
                                </div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day today active" data-date="2025-05-16">
                                <div class="calendar-day-number" data-weekday="Пт">16</div>
                                <div class="calendar-day-content">
                                    <div class="calendar-transaction expense">
                                        <i class="bi bi-phone"></i>
                                        <span>Связь</span>
                                    </div>
                                    <div class="calendar-transaction expense">
                                        <i class="bi bi-cup-hot"></i>
                                        <span>Кафе</span>
                                    </div>
                                </div>
                                <div class="calendar-day-summary">
                                    <div class="calendar-day-expense">-1 800 ₽</div>
                                </div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-17">
                                <div class="calendar-day-number" data-weekday="Сб">17</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-18">
                                <div class="calendar-day-number" data-weekday="Вс">18</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-19">
                                <div class="calendar-day-number" data-weekday="Пн">19</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-20">
                                <div class="calendar-day-number" data-weekday="Вт">20</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-21">
                                <div class="calendar-day-number" data-weekday="Ср">21</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-22">
                                <div class="calendar-day-number" data-weekday="Чт">22</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-23">
                                <div class="calendar-day-number" data-weekday="Пт">23</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-24">
                                <div class="calendar-day-number" data-weekday="Сб">24</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-25">
                                <div class="calendar-day-number" data-weekday="Вс">25</div>
                                <div class="calendar-day-content">
                                    <div class="calendar-transaction income">
                                        <i class="bi bi-bank"></i>
                                        <span>Дивиденды</span>
                                    </div>
                                </div>
                                <div class="calendar-day-summary">
                                    <div class="calendar-day-income">+5 000 ₽</div>
                                </div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-26">
                                <div class="calendar-day-number" data-weekday="Пн">26</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-27">
                                <div class="calendar-day-number" data-weekday="Вт">27</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-28">
                                <div class="calendar-day-number" data-weekday="Ср">28</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-29">
                                <div class="calendar-day-number" data-weekday="Чт">29</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-30">
                                <div class="calendar-day-number" data-weekday="Пт">30</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                            <div class="calendar-day" data-date="2025-05-31">
                                <div class="calendar-day-number" data-weekday="Сб">31</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>

                            <!-- Дни следующего месяца -->
                            <div class="calendar-day other-month" data-date="2025-06-01">
                                <div class="calendar-day-number" data-weekday="Вс">1</div>
                                <div class="calendar-day-content"></div>
                                <button class="calendar-add-btn" title="Добавить транзакцию">
                                    <i class="bi bi-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3">
                <div class="day-details active" id="dayDetails">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h2 class="card-title" data-lang="calendar_day_details">Детали дня</h2>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <h3 class="h5" data-lang="calendar_selected_date">Выбранная дата</h3>
                                <p class="mb-0" id="selectedDate">16 мая 2025, Пятница</p>
                            </div>

                            <div class="row mb-3">
                                <div class="col-6">
                                    <div class="summary-title" data-lang="calendar_income">Доходы</div>
                                    <div class="summary-value income" id="dayIncome">0 ₽</div>
                                </div>
                                <div class="col-6">
                                    <div class="summary-title" data-lang="calendar_expense">Расходы</div>
                                    <div class="summary-value expense" id="dayExpense">1 800 ₽</div>
                                </div>
                            </div>

                            <div class="mb-3">
                                <h3 class="h5" data-lang="calendar_transactions">Транзакции</h3>
                                <div class="transaction-list">
                                    <div class="transaction-item">
                                        <div class="transaction-icon transaction-icon-expense">
                                            <i class="bi bi-phone"></i>
                                        </div>
                                        <div class="transaction-info">
                                            <div class="transaction-title" data-lang="transaction_phone">Связь</div>
                                            <div class="transaction-category" data-lang="category_utilities">Коммунальные услуги</div>
                                        </div>
                                        <div class="transaction-amount expense">-800 ₽</div>
                                    </div>
                                    <div class="transaction-item">
                                        <div class="transaction-icon transaction-icon-expense">
                                            <i class="bi bi-cup-hot"></i>
                                        </div>
                                        <div class="transaction-info">
                                            <div class="transaction-title" data-lang="transaction_cafe">Кафе</div>
                                            <div class="transaction-category" data-lang="category_entertainment">Развлечения</div>
                                        </div>
                                        <div class="transaction-amount expense">-1 000 ₽</div>
                                    </div>
                                </div>
                            </div>

                            <button class="btn btn-primary w-100" id="addTransactionBtn" data-lang="calendar_add_transaction">
                                <i class="bi bi-plus-lg"></i>
                                <span>Добавить транзакцию</span>
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title" data-lang="calendar_month_summary">Итоги месяца</h2>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-6">
                                    <div class="summary-title" data-lang="calendar_income">Доходы</div>
                                    <div class="summary-value income">80 000 ₽</div>
                                </div>
                                <div class="col-6">
                                    <div class="summary-title" data-lang="calendar_expense">Расходы</div>
                                    <div class="summary-value expense">39 150 ₽</div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="summary-title" data-lang="calendar_balance">Баланс</div>
                                <div class="summary-value balance">40 850 ₽</div>
                            </div>
                            <div class="mb-3">
                                <h3 class="h5" data-lang="calendar_top_categories">Топ категории</h3>
                                <div class="d-flex justify-content-between mb-2">
                                    <span data-lang="category_housing">Жилье</span>
                                    <span class="fw-bold">30 000 ₽</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span data-lang="category_groceries">Продукты</span>
                                    <span class="fw-bold">5 700 ₽</span>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span data-lang="category_entertainment">Развлечения</span>
                                    <span class="fw-bold">2 200 ₽</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Модальное окно для добавления транзакции -->
    <div class="modal fade" id="transactionModal" tabindex="-1" aria-labelledby="transactionModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="transactionModalLabel" data-lang="transaction_add">Добавить транзакцию</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="transactionForm">
                        <div class="form-group">
                            <label for="transactionDate" class="form-label" data-lang="transaction_date">Дата</label>
                            <input type="date" class="form-control" id="transactionDate" value="2025-05-16">
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-lang="transaction_type">Тип транзакции</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="transactionType" id="typeIncome" value="income">
                                <label class="form-check-label" for="typeIncome" data-lang="transaction_type_income">Доход</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="transactionType" id="typeExpense" value="expense" checked>
                                <label class="form-check-label" for="typeExpense" data-lang="transaction_type_expense">Расход</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="transactionAmount" class="form-label" data-lang="transaction_amount">Сумма</label>
                            <input type="number" class="form-control" id="transactionAmount" placeholder="0" min="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="transactionCategory" class="form-label" data-lang="transaction_category">Категория</label>
                            <select class="form-select" id="transactionCategory">
                                <option value="" disabled selected data-lang="transaction_select_category">Выберите категорию</option>
                                <optgroup label="Расходы" data-lang="transaction_expenses">
                                    <option value="housing" data-lang="category_housing">Жилье</option>
                                    <option value="groceries" data-lang="category_groceries">Продукты</option>
                                    <option value="transport" data-lang="category_transport">Транспорт</option>
                                    <option value="entertainment" data-lang="category_entertainment">Развлечения</option>
                                    <option value="health" data-lang="category_health">Здоровье</option>
                                    <option value="education" data-lang="category_education">Образование</option>
                                    <option value="utilities" data-lang="category_utilities">Коммунальные услуги</option>
                                </optgroup>
                                <optgroup label="Доходы" data-lang="transaction_income">
                                    <option value="salary" data-lang="category_salary">Зарплата</option>
                                    <option value="investments" data-lang="category_investments">Инвестиции</option>
                                    <option value="gifts" data-lang="category_gifts">Подарки</option>
                                </optgroup>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="transactionDescription" class="form-label" data-lang="transaction_description">Описание</label>
                            <input type="text" class="form-control" id="transactionDescription" placeholder="Например: Продукты в супермаркете" data-lang-placeholder="transaction_description_placeholder">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" data-bs-dismiss="modal" data-lang="transaction_cancel">Отмена</button>
                    <button type="button" class="btn btn-primary" id="saveTransactionBtn" data-lang="transaction_save">Сохранить</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="#" class="footer-link" data-lang="footer_help">Помощь</a>
                    <a href="#" class="footer-link" data-lang="footer_privacy">Конфиденциальность</a>
                    <a href="#" class="footer-link" data-lang="footer_terms">Условия использования</a>
                </div>
                <div class="footer-copyright">
                    &copy; 2025 <span data-lang="app_title">Домашняя бухгалтерия</span>. <span data-lang="footer_rights">Все права защищены.</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Словари для разных языков
        const dictionaries = {
            ru: {
                // Общие
                app_title: "Домашняя бухгалтерия",
                nav_home: "Главная",
                nav_transactions: "Транзакции",
                nav_categories: "Категории",
                nav_calendar: "Календарь",
                nav_budget: "Бюджет",

                // Календарь
                calendar_title: "Календарь финансов",
                calendar_subtitle: "Отслеживайте доходы и расходы по дням, неделям и месяцам",
                calendar_view_day: "День",
                calendar_view_month: "Месяц",
                calendar_view_week: "Неделя",
                calendar_view_year: "Год",
                calendar_today: "Сегодня",
                calendar_weekday_mon: "Пн",
                calendar_weekday_tue: "Вт",
                calendar_weekday_wed: "Ср",
                calendar_weekday_thu: "Чт",
                calendar_weekday_fri: "Пт",
                calendar_weekday_sat: "Сб",
                calendar_weekday_sun: "Вс",
                calendar_day_details: "Детали дня",
                calendar_selected_date: "Выбранная дата",
                calendar_income: "Доходы",
                calendar_expense: "Расходы",
                calendar_balance: "Баланс",
                calendar_transactions: "Транзакции",
                calendar_add_transaction: "Добавить транзакцию",
                calendar_month_summary: "Итоги месяца",
                calendar_top_categories: "Топ категории",

                // Транзакции
                transaction_add: "Добавить транзакцию",
                transaction_date: "Дата",
                transaction_type: "Тип транзакции",
                transaction_type_income: "Доход",
                transaction_type_expense: "Расход",
                transaction_amount: "Сумма",
                transaction_category: "Категория",
                transaction_select_category: "Выберите категорию",
                transaction_expenses: "Расходы",
                transaction_income: "Доходы",
                transaction_description: "Описание",
                transaction_description_placeholder: "Например: Продукты в супермаркете",
                transaction_cancel: "Отмена",
                transaction_save: "Сохранить",
                transaction_phone: "Связь",
                transaction_cafe: "Кафе",

                // Категории
                category_housing: "Жилье",
                category_groceries: "Продукты",
                category_transport: "Транспорт",
                category_entertainment: "Развлечения",
                category_health: "Здоровье",
                category_education: "Образование",
                category_utilities: "Коммунальные услуги",
                category_salary: "Зарплата",
                category_investments: "Инвестиции",
                category_gifts: "Подарки",

                // Футер
                footer_help: "Помощь",
                footer_privacy: "Конфиденциальность",
                footer_terms: "Условия использования",
                footer_rights: "Все права защищены."
            },
            en: {
                // General
                app_title: "Home Accounting",
                nav_home: "Home",
                nav_transactions: "Transactions",
                nav_categories: "Categories",
                nav_calendar: "Calendar",
                nav_budget: "Budget",

                // Calendar
                calendar_title: "Finance Calendar",
                calendar_subtitle: "Track income and expenses by days, weeks, and months",
                calendar_view_day: "Day",
                calendar_view_month: "Month",
                calendar_view_week: "Week",
                calendar_view_year: "Year",
                calendar_today: "Today",
                calendar_weekday_mon: "Mon",
                calendar_weekday_tue: "Tue",
                calendar_weekday_wed: "Wed",
                calendar_weekday_thu: "Thu",
                calendar_weekday_fri: "Fri",
                calendar_weekday_sat: "Sat",
                calendar_weekday_sun: "Sun",
                calendar_day_details: "Day Details",
                calendar_selected_date: "Selected Date",
                calendar_income: "Income",
                calendar_expense: "Expenses",
                calendar_balance: "Balance",
                calendar_transactions: "Transactions",
                calendar_add_transaction: "Add Transaction",
                calendar_month_summary: "Month Summary",
                calendar_top_categories: "Top Categories",

                // Transactions
                transaction_add: "Add Transaction",
                transaction_date: "Date",
                transaction_type: "Transaction Type",
                transaction_type_income: "Income",
                transaction_type_expense: "Expense",
                transaction_amount: "Amount",
                transaction_category: "Category",
                transaction_select_category: "Select a category",
                transaction_expenses: "Expenses",
                transaction_income: "Income",
                transaction_description: "Description",
                transaction_description_placeholder: "For example: Groceries at the supermarket",
                transaction_cancel: "Cancel",
                transaction_save: "Save",
                transaction_phone: "Phone",
                transaction_cafe: "Cafe",

                // Categories
                category_housing: "Housing",
                category_groceries: "Groceries",
                category_transport: "Transport",
                category_entertainment: "Entertainment",
                category_health: "Health",
                category_education: "Education",
                category_utilities: "Utilities",
                category_salary: "Salary",
                category_investments: "Investments",
                category_gifts: "Gifts",

                // Footer
                footer_help: "Help",
                footer_privacy: "Privacy",
                footer_terms: "Terms of Use",
                footer_rights: "All rights reserved."
            },
            th: {
                // ทั่วไป
                app_title: "บัญชีครัวเรือน",
                nav_home: "หน้าหลัก",
                nav_transactions: "ธุรกรรม",
                nav_categories: "หมวดหมู่",
                nav_calendar: "ปฏิทิน",
                nav_budget: "งบประมาณ",

                // ปฏิทิน
                calendar_title: "ปฏิทินการเงิน",
                calendar_subtitle: "ติดตามรายรับและรายจ่ายตามวัน สัปดาห์ และเดือน",
                calendar_view_day: "วัน",
                calendar_view_month: "เดือน",
                calendar_view_week: "สัปดาห์",
                calendar_view_year: "ปี",
                calendar_today: "วันนี้",
                calendar_weekday_mon: "จ",
                calendar_weekday_tue: "อ",
                calendar_weekday_wed: "พ",
                calendar_weekday_thu: "พฤ",
                calendar_weekday_fri: "ศ",
                calendar_weekday_sat: "ส",
                calendar_weekday_sun: "อา",
                calendar_day_details: "รายละเอียดวัน",
                calendar_selected_date: "วันที่เลือก",
                calendar_income: "รายได้",
                calendar_expense: "ค่าใช้จ่าย",
                calendar_balance: "ยอดคงเหลือ",
                calendar_transactions: "ธุรกรรม",
                calendar_add_transaction: "เพิ่มธุรกรรม",
                calendar_month_summary: "สรุปเดือน",
                calendar_top_categories: "หมวดหมู่ยอดนิยม",

                // ธุรกรรม
                transaction_add: "เพิ่มธุรกรรม",
                transaction_date: "วันที่",
                transaction_type: "ประเภทธุรกรรม",
                transaction_type_income: "รายได้",
                transaction_type_expense: "ค่าใช้จ่าย",
                transaction_amount: "จำนวนเงิน",
                transaction_category: "หมวดหมู่",
                transaction_select_category: "เลือกหมวดหมู่",
                transaction_expenses: "ค่าใช้จ่าย",
                transaction_income: "รายได้",
                transaction_description: "คำอธิบาย",
                transaction_description_placeholder: "ตัวอย่าง: ของชำที่ซูเปอร์มาร์เก็ต",
                transaction_cancel: "ยกเลิก",
                transaction_save: "บันทึก",
                transaction_phone: "โทรศัพท์",
                transaction_cafe: "คาเฟ่",

                // หมวดหมู่
                category_housing: "ที่อยู่อาศัย",
                category_groceries: "ของชำ",
                category_transport: "การขนส่ง",
                category_entertainment: "ความบันเทิง",
                category_health: "สุขภาพ",
                category_education: "การศึกษา",
                category_utilities: "สาธารณูปโภค",
                category_salary: "เงินเดือน",
                category_investments: "การลงทุน",
                category_gifts: "ของขวัญ",

                // ส่วนท้าย
                footer_help: "ช่วยเหลือ",
                footer_privacy: "ความเป็นส่วนตัว",
                footer_terms: "เงื่อนไขการใช้งาน",
                footer_rights: "สงวนลิขสิทธิ์ทั้งหมด"
            }
        };

        // Текущий язык (по умолчанию русский)
        let currentLang = 'ru';

        // Функция для изменения языка
        function changeLanguage(lang) {
            if (!dictionaries[lang]) return;

            currentLang = lang;

            // Обновляем атрибут lang у html
            document.documentElement.lang = lang;

            // Обновляем активную кнопку языка
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.language-btn[onclick="changeLanguage('${lang}')"]`).classList.add('active');

            // Обновляем все элементы с атрибутом data-lang
            document.querySelectorAll('[data-lang]').forEach(element => {
                const key = element.getAttribute('data-lang');
                if (dictionaries[lang][key]) {
                    element.textContent = dictionaries[lang][key];
                }
            });

            // Обновляем плейсхолдеры
            document.querySelectorAll('[data-lang-placeholder]').forEach(element => {
                const key = element.getAttribute('data-lang-placeholder');
                if (dictionaries[lang][key]) {
                    element.placeholder = dictionaries[lang][key];
                }
            });

            // Обновляем атрибуты data-weekday для дней календаря
            updateWeekdayLabels();

            // Обновляем выбранную дату
            updateSelectedDateDisplay();
        }

        // Функция для обновления меток дней недели
        function updateWeekdayLabels() {
            const weekdays = {
                ru: ['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс'],
                en: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                th: ['จ', 'อ', 'พ', 'พฤ', 'ศ', 'ส', 'อา']
            };

            document.querySelectorAll('.calendar-day-number').forEach(dayNumber => {
                const weekdayIndex = ['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс'].indexOf(dayNumber.getAttribute('data-weekday'));
                if (weekdayIndex !== -1) {
                    dayNumber.setAttribute('data-weekday', weekdays[currentLang][weekdayIndex]);
                }
            });
        }

        // Функция для обновления отображения выбранной даты
        function updateSelectedDateDisplay() {
            const selectedDateElement = document.getElementById('selectedDate');
            const activeDay = document.querySelector('.calendar-day.active');

            if (activeDay && selectedDateElement) {
                const date = new Date(activeDay.getAttribute('data-date'));

                // Форматируем дату в зависимости от языка
                let formattedDate;
                if (currentLang === 'ru') {
                    const day = date.getDate();
                    const month = date.toLocaleString('ru', { month: 'long' });
                    const year = date.getFullYear();
                    const weekday = date.toLocaleString('ru', { weekday: 'long' });
                    formattedDate = `${day} ${month} ${year}, ${weekday.charAt(0).toUpperCase() + weekday.slice(1)}`;
                } else if (currentLang === 'en') {
                    formattedDate = date.toLocaleString('en', {
                        day: 'numeric',
                        month: 'long',
                        year: 'numeric',
                        weekday: 'long'
                    });
                } else if (currentLang === 'th') {
                    formattedDate = date.toLocaleString('th', {
                        day: 'numeric',
                        month: 'long',
                        year: 'numeric',
                        weekday: 'long'
                    });
                }

                selectedDateElement.textContent = formattedDate;
            }
        }

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            // Проверяем, есть ли сохраненный язык в localStorage
            const savedLang = localStorage.getItem('preferredLanguage');
            if (savedLang && dictionaries[savedLang]) {
                changeLanguage(savedLang);
            } else {
                // Если нет сохраненного языка, используем язык браузера или русский по умолчанию
                const browserLang = navigator.language.split('-')[0];
                if (dictionaries[browserLang]) {
                    changeLanguage(browserLang);
                } else {
                    changeLanguage('ru');
                }
            }

            // Мобильное меню
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const mobileMenuClose = document.getElementById('mobileMenuClose');
            const navigation = document.getElementById('navigation');

            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', function() {
                    navigation.classList.add('active');
                });
            }

            if (mobileMenuClose) {
                mobileMenuClose.addEventListener('click', function() {
                    navigation.classList.remove('active');
                });
            }

            // Закрытие мобильного меню при клике на ссылку
            document.querySelectorAll('.nav-item a').forEach(link => {
                link.addEventListener('click', function() {
                    navigation.classList.remove('active');
                });
            });

            // Инициализация модального окна для добавления транзакции
            const transactionModal = new bootstrap.Modal(document.getElementById('transactionModal'));

            // Обработчик для кнопки "Добавить транзакцию"
            document.getElementById('addTransactionBtn').addEventListener('click', function() {
                // Устанавливаем текущую дату в форме
                const activeDay = document.querySelector('.calendar-day.active');
                if (activeDay) {
                    document.getElementById('transactionDate').value = activeDay.getAttribute('data-date');
                }

                // Показываем модальное окно
                transactionModal.show();
            });

            // Обработчик для кнопок добавления транзакции в ячейках календаря
            document.querySelectorAll('.calendar-add-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation(); // Предотвращаем всплытие события

                    // Получаем ячейку календаря
                    const calendarDay = this.closest('.calendar-day');

                    // Устанавливаем активный день
                    document.querySelectorAll('.calendar-day').forEach(day => {
                        day.classList.remove('active');
                    });
                    calendarDay.classList.add('active');

                    // Обновляем детали дня
                    updateDayDetails(calendarDay);

                    // Устанавливаем дату в форме
                    document.getElementById('transactionDate').value = calendarDay.getAttribute('data-date');

                    // Показываем модальное окно
                    transactionModal.show();
                });
            });

            // Обработчик для сохранения транзакции
            document.getElementById('saveTransactionBtn').addEventListener('click', function() {
                // Получаем данные из формы
                const date = document.getElementById('transactionDate').value;
                const type = document.querySelector('input[name="transactionType"]:checked').value;
                const amount = document.getElementById('transactionAmount').value;
                const category = document.getElementById('transactionCategory').value;
                const description = document.getElementById('transactionDescription').value;

                // Проверяем, что все поля заполнены
                if (!date || !amount || !category || !description) {
                    alert('Пожалуйста, заполните все поля');
                    return;
                }

                // Здесь будет логика сохранения транзакции
                // В реальном приложении здесь будет отправка данных на сервер

                // Закрываем модальное окно
                transactionModal.hide();

                // Сбрасываем форму
                document.getElementById('transactionForm').reset();

                // Обновляем календарь (в реальном приложении здесь будет обновление данных с сервера)
                // Для демонстрации просто добавим новую транзакцию в активный день
                const activeDay = document.querySelector('.calendar-day.active');
                if (activeDay) {
                    const dayContent = activeDay.querySelector('.calendar-day-content');

                    // Создаем элемент транзакции
                    const transactionElement = document.createElement('div');
                    transactionElement.className = `calendar-transaction ${type}`;

                    // Определяем иконку в зависимости от категории
                    let icon;
                    switch (category) {
                        case 'housing':
                            icon = 'bi-house';
                            break;
                        case 'groceries':
                            icon = 'bi-cart';
                            break;
                        case 'transport':
                            icon = 'bi-car-front';
                            break;
                        case 'entertainment':
                            icon = 'bi-cup-hot';
                            break;
                        case 'health':
                            icon = 'bi-heart-pulse';
                            break;
                        case 'education':
                            icon = 'bi-book';
                            break;
                        case 'utilities':
                            icon = 'bi-phone';
                            break;
                        case 'salary':
                            icon = 'bi-briefcase';
                            break;
                        case 'investments':
                            icon = 'bi-bank';
                            break;
                        case 'gifts':
                            icon = 'bi-gift';
                            break;
                        default:
                            icon = 'bi-wallet2';
                    }

                    transactionElement.innerHTML = `
                        <i class="bi ${icon}"></i>
                        <span>${description}</span>
                    `;

                    dayContent.appendChild(transactionElement);

                    // Обновляем сумму дня
                    let daySummary = activeDay.querySelector('.calendar-day-summary');
                    if (!daySummary) {
                        daySummary = document.createElement('div');
                        daySummary.className = 'calendar-day-summary';
                        activeDay.appendChild(daySummary);
                    }

                    // Обновляем или создаем элемент для отображения суммы
                    let dayAmount = daySummary.querySelector(`.calendar-day-${type}`);
                    if (!dayAmount) {
                        dayAmount = document.createElement('div');
                        dayAmount.className = `calendar-day-${type}`;
                        daySummary.appendChild(dayAmount);
                    }

                    // Форматируем сумму
                    const formattedAmount = type === 'income' ? `+${amount} ₽` : `-${amount} ₽`;
                    dayAmount.textContent = formattedAmount;

                    // Обновляем детали дня
                    updateDayDetails(activeDay);
                }

                // Показываем уведомление об успешном сохранении
                alert(dictionaries[currentLang].transaction_save_success || 'Транзакция успешно сохранена!');
            });

            // Обработчик для выбора дня в календаре
            document.querySelectorAll('.calendar-day').forEach(day => {
                day.addEventListener('click', function() {
                    // Устанавливаем активный день
                    document.querySelectorAll('.calendar-day').forEach(d => {
                        d.classList.remove('active');
                    });
                    this.classList.add('active');

                    // Обновляем детали дня
                    updateDayDetails(this);
                });
            });

            // Обработчик для кнопки "Сегодня"
            document.getElementById('todayBtn').addEventListener('click', function() {
                // Находим ячейку с сегодняшней датой
                const today = document.querySelector('.calendar-day.today');
                if (today) {
                    // Устанавливаем активный день
                    document.querySelectorAll('.calendar-day').forEach(day => {
                        day.classList.remove('active');
                    });
                    today.classList.add('active');

                    // Обновляем детали дня
                    updateDayDetails(today);

                    // Прокручиваем к сегодняшней дате
                    today.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            });

            // Обработчики для кнопок навигации по месяцам
            document.getElementById('prevMonth').addEventListener('click', function() {
                // В реальном приложении здесь будет логика перехода к предыдущему месяцу
                alert('Переход к предыдущему месяцу');
            });

            document.getElementById('nextMonth').addEventListener('click', function() {
                // В реальном приложении здесь будет логика перехода к следующему месяцу
                alert('Переход к следующему месяцу');
            });

            // Обработчики для кнопок выбора вида календаря
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Устанавливаем активную кнопку
                    document.querySelectorAll('.view-btn').forEach(b => {
                        b.classList.remove('active');
                    });
                    this.classList.add('active');

                    // В реальном приложении здесь будет логика изменения вида календаря
                    const view = this.getAttribute('data-view');
                    alert(`Переключение на вид: ${view}`);
                });
            });

            // Функция для обновления деталей дня
            function updateDayDetails(day) {
                // Получаем дату
                const date = day.getAttribute('data-date');
                const dateObj = new Date(date);

                // Форматируем дату в зависимости от языка
                let formattedDate;
                if (currentLang === 'ru') {
                    const dayNum = dateObj.getDate();
                    const month = dateObj.toLocaleString('ru', { month: 'long' });
                    const year = dateObj.getFullYear();
                    const weekday = dateObj.toLocaleString('ru', { weekday: 'long' });
                    formattedDate = `${dayNum} ${month} ${year}, ${weekday.charAt(0).toUpperCase() + weekday.slice(1)}`;
                } else if (currentLang === 'en') {
                    formattedDate = dateObj.toLocaleString('en', {
                        day: 'numeric',
                        month: 'long',
                        year: 'numeric',
                        weekday: 'long'
                    });
                } else if (currentLang === 'th') {
                    formattedDate = dateObj.toLocaleString('th', {
                        day: 'numeric',
                        month: 'long',
                        year: 'numeric',
                        weekday: 'long'
                    });
                }

                // Обновляем выбранную дату
                document.getElementById('selectedDate').textContent = formattedDate;

                // Получаем доходы и расходы дня
                const incomeElement = day.querySelector('.calendar-day-income');
                const expenseElement = day.querySelector('.calendar-day-expense');

                let income = 0;
                let expense = 0;

                if (incomeElement) {
                    // Извлекаем числовое значение из строки "+75 000 ₽"
                    income = parseInt(incomeElement.textContent.replace(/[^0-9]/g, '')) || 0;
                }

                if (expenseElement) {
                    // Извлекаем числовое значение из строки "-2 500 ₽"
                    expense = parseInt(expenseElement.textContent.replace(/[^0-9]/g, '')) || 0;
                }

                // Обновляем суммы в деталях дня
                document.getElementById('dayIncome').textContent = income ? `${income} ₽` : '0 ₽';
                document.getElementById('dayExpense').textContent = expense ? `${expense} ₽` : '0 ₽';

                // В реальном приложении здесь будет логика загрузки транзакций для выбранного дня
                // Для демонстрации просто показываем заглушку

                // Если это 16 мая, показываем предопределенные транзакции
                if (date === '2025-05-16') {
                    document.querySelector('.transaction-list').innerHTML = `
                        <div class="transaction-item">
                            <div class="transaction-icon transaction-icon-expense">
                                <i class="bi bi-phone"></i>
                            </div>
                            <div class="transaction-info">
                                <div class="transaction-title" data-lang="transaction_phone">${dictionaries[currentLang].transaction_phone}</div>
                                <div class="transaction-category" data-lang="category_utilities">${dictionaries[currentLang].category_utilities}</div>
                            </div>
                            <div class="transaction-amount expense">-800 ₽</div>
                        </div>
                        <div class="transaction-item">
                            <div class="transaction-icon transaction-icon-expense">
                                <i class="bi bi-cup-hot"></i>
                            </div>
                            <div class="transaction-info">
                                <div class="transaction-title" data-lang="transaction_cafe">${dictionaries[currentLang].transaction_cafe}</div>
                                <div class="transaction-category" data-lang="category_entertainment">${dictionaries[currentLang].category_entertainment}</div>
                            </div>
                            <div class="transaction-amount expense">-1 000 ₽</div>
                        </div>
                    `;
                } else if (date === '2025-05-10') {
                    document.querySelector('.transaction-list').innerHTML = `
                        <div class="transaction-item">
                            <div class="transaction-icon transaction-icon-income">
                                <i class="bi bi-briefcase"></i>
                            </div>
                            <div class="transaction-info">
                                <div class="transaction-title" data-lang="category_salary">${dictionaries[currentLang].category_salary}</div>
                                <div class="transaction-category" data-lang="transaction_income">${dictionaries[currentLang].transaction_income}</div>
                            </div>
                            <div class="transaction-amount income">+75 000 ₽</div>
                        </div>
                    `;
                } else if (date === '2025-05-01') {
                    document.querySelector('.transaction-list').innerHTML = `
                        <div class="transaction-item">
                            <div class="transaction-icon transaction-icon-expense">
                                <i class="bi bi-cart"></i>
                            </div>
                            <div class="transaction-info">
                                <div class="transaction-title" data-lang="category_groceries">${dictionaries[currentLang].category_groceries}</div>
                                <div class="transaction-category" data-lang="transaction_expenses">${dictionaries[currentLang].transaction_expenses}</div>
                            </div>
                            <div class="transaction-amount expense">-2 500 ₽</div>
                        </div>
                    `;
                } else if (date === '2025-05-12') {
                    document.querySelector('.transaction-list').innerHTML = `
                        <div class="transaction-item">
                            <div class="transaction-icon transaction-icon-expense">
                                <i class="bi bi-house"></i>
                            </div>
                            <div class="transaction-info">
                                <div class="transaction-title" data-lang="category_housing">${dictionaries[currentLang].category_housing}</div>
                                <div class="transaction-category" data-lang="transaction_expenses">${dictionaries[currentLang].transaction_expenses}</div>
                            </div>
                            <div class="transaction-amount expense">-30 000 ₽</div>
                        </div>
                    `;
                } else {
                    // Для остальных дней показываем пустой список
                    document.querySelector('.transaction-list').innerHTML = `
                        <div class="text-center py-4 text-secondary">
                            <i class="bi bi-info-circle mb-2" style="font-size: 2rem;"></i>
                            <p>${dictionaries[currentLang].calendar_no_transactions || 'Нет транзакций для выбранного дня'}</p>
                        </div>
                    `;
                }
            }

            // Сохраняем выбранный язык в localStorage при изменении
            window.changeLanguage = function(lang) {
                if (!dictionaries[lang]) return;

                currentLang = lang;

                // Обновляем атрибут lang у html
                document.documentElement.lang = lang;

                // Обновляем активную кнопку языка
                document.querySelectorAll('.language-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`.language-btn[onclick="changeLanguage('${lang}')"]`).classList.add('active');

                // Обновляем все элементы с атрибутом data-lang
                document.querySelectorAll('[data-lang]').forEach(element => {
                    const key = element.getAttribute('data-lang');
                    if (dictionaries[lang][key]) {
                        element.textContent = dictionaries[lang][key];
                    }
                });

                // Обновляем плейсхолдеры
                document.querySelectorAll('[data-lang-placeholder]').forEach(element => {
                    const key = element.getAttribute('data-lang-placeholder');
                    if (dictionaries[lang][key]) {
                        element.placeholder = dictionaries[lang][key];
                    }
                });

                // Обновляем атрибуты data-weekday для дней календаря
                updateWeekdayLabels();

                // Обновляем выбранную дату
                updateSelectedDateDisplay();

                // Обновляем детали дня
                const activeDay = document.querySelector('.calendar-day.active');
                if (activeDay) {
                    updateDayDetails(activeDay);
                }

                localStorage.setItem('preferredLanguage', lang);
            };
        });
    </script>
</body>
</html>
