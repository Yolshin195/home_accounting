<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Категории - Домашняя бухгалтерия</title>
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
    :root {
        --primary-color: #5c6ac4;
        --primary-light: #f5f7ff;
        --secondary-color: #6b7280;
        --success-color: #10b981;
        --success-light: rgba(16, 185, 129, 0.1);
        --danger-color: #ef4444;
        --danger-light: rgba(239, 68, 68, 0.1);
        --warning-color: #f59e0b;
        --dark-color: #111827;
        --light-color: #f9fafb;
        --border-color: #e5e7eb;
        --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
        --transition: all 0.2s ease;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Inter', sans-serif;
        color: var(--dark-color);
        background-color: #f3f4f6;
        line-height: 1.5;
    }

    .app-container {
        max-width: 1280px;
        margin: 0 auto;
        padding: 1.5rem;
    }

    .header {
        background-color: white;
        border-radius: 12px;
        padding: 1rem;
        margin-bottom: 1.5rem;
        box-shadow: var(--card-shadow);
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .brand {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .brand-icon {
        font-size: 1.75rem;
        color: var(--primary-color);
    }

    .brand-title {
        font-weight: 600;
        font-size: 1.25rem;
        color: var(--dark-color);
        margin: 0;
    }

    .navigation {
        display: flex;
        align-items: center;
    }

    .nav-list {
        display: flex;
        list-style: none;
        margin: 0;
        padding: 0;
        gap: 0.5rem;
    }

    .nav-item a {
        display: block;
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        text-decoration: none;
        color: var(--secondary-color);
        font-weight: 500;
        transition: var(--transition);
    }

    .nav-item a:hover {
        background-color: var(--primary-light);
        color: var(--primary-color);
    }

    .nav-item a.active {
        background-color: var(--primary-color);
        color: white;
    }

    .language-selector {
        display: flex;
        margin-left: 1rem;
    }

    .language-btn {
        background: none;
        border: none;
        padding: 0.25rem;
        border-radius: 0.25rem;
        opacity: 0.6;
        transition: var(--transition);
    }

    .language-btn.active {
        opacity: 1;
        border: 2px solid var(--primary-color);
    }

    .language-btn:hover {
        opacity: 1;
        background-color: var(--primary-light);
    }

    .language-btn img {
        width: 24px;
        height: 24px;
        border-radius: 4px;
    }

    .section {
        background-color: white;
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        box-shadow: var(--card-shadow);
    }

    .section-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        color: var(--dark-color);
    }

    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }

    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        font-weight: 500;
        border-radius: 0.5rem;
        padding: 0.625rem 1rem;
        transition: var(--transition);
        cursor: pointer;
        border: none;
    }

    .btn-primary {
        background-color: var(--primary-color);
        color: white;
    }

    .btn-primary:hover {
        background-color: #4c5aa9;
    }

    .btn-success {
        background-color: var(--success-color);
        color: white;
    }

    .btn-success:hover {
        background-color: #0da571;
    }

    .btn-danger {
        background-color: var(--danger-color);
        color: white;
    }

    .btn-danger:hover {
        background-color: #dc2626;
    }

    .btn-sm {
        padding: 0.375rem 0.75rem;
        font-size: 0.875rem;
    }

    .form-control, .form-select {
        padding: 0.625rem 1rem;
        border-radius: 0.5rem;
        border: 1px solid var(--border-color);
        background-color: white;
        color: var(--dark-color);
        width: 100%;
        font-size: 0.875rem;
        transition: var(--transition);
    }

    .form-control:focus, .form-select:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(92, 106, 196, 0.2);
    }

    .input-group {
        display: flex;
        position: relative;
    }

    .input-group-text {
        display: flex;
        align-items: center;
        padding: 0.625rem;
        background-color: #f9fafb;
        border: 1px solid var(--border-color);
        border-right: 0;
        border-radius: 0.5rem 0 0 0.5rem;
        color: var(--secondary-color);
    }

    .input-group .form-control {
        border-radius: 0 0.5rem 0.5rem 0;
    }

    .category-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1.5rem;
    }

    .category-card {
        background-color: white;
        border-radius: 12px;
        border: 1px solid var(--border-color);
        overflow: hidden;
        transition: var(--transition);
    }

    .category-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--card-shadow);
    }

    .category-header {
        padding: 1rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border-bottom: 1px solid var(--border-color);
    }

    .category-title {
        font-weight: 600;
        font-size: 1rem;
        margin: 0;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .category-icon {
        width: 2rem;
        height: 2rem;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 0.5rem;
        font-size: 1.25rem;
    }

    .category-income .category-icon {
        background-color: var(--success-light);
        color: var(--success-color);
    }

    .category-expense .category-icon {
        background-color: var(--danger-light);
        color: var(--danger-color);
    }

    .category-body {
        padding: 1rem;
    }

    .category-description {
        color: var(--secondary-color);
        font-size: 0.875rem;
        margin-bottom: 1rem;
    }

    .category-footer {
        padding: 1rem;
        border-top: 1px solid var(--border-color);
        display: flex;
        justify-content: flex-end;
        gap: 0.5rem;
    }

    .badge {
        display: inline-flex;
        align-items: center;
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-weight: 500;
        font-size: 0.75rem;
    }

    .badge-income {
        background-color: var(--success-light);
        color: var(--success-color);
    }

    .badge-expense {
        background-color: var(--danger-light);
        color: var(--danger-color);
    }

    .action-buttons {
        display: flex;
        gap: 0.5rem;
    }

    .btn-icon {
        width: 2rem;
        height: 2rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border-radius: 0.375rem;
        background-color: white;
        color: var(--secondary-color);
        border: 1px solid var(--border-color);
        transition: var(--transition);
    }

    .btn-icon:hover {
        background-color: #f9fafb;
    }

    .btn-icon-primary {
        background-color: var(--primary-light);
        color: var(--primary-color);
        border-color: var(--primary-light);
    }

    .btn-icon-primary:hover {
        background-color: rgba(92, 106, 196, 0.2);
    }

    .btn-icon-danger {
        background-color: var(--danger-light);
        color: var(--danger-color);
        border-color: var(--danger-light);
    }

    .btn-icon-danger:hover {
        background-color: rgba(239, 68, 68, 0.2);
    }

    .modal-content {
        border-radius: 0.75rem;
        border: none;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
        overflow: hidden;
    }

    .modal-header {
        padding: 1.25rem 1.5rem;
        border-bottom: 1px solid var(--border-color);
    }

    .modal-title {
        font-weight: 600;
        font-size: 1.125rem;
    }

    .modal-body {
        padding: 1.5rem;
    }

    .modal-footer {
        padding: 1rem 1.5rem;
        border-top: 1px solid var(--border-color);
    }

    .modal-header-create {
        background-color: var(--success-color);
        color: white;
    }

    .modal-header-edit {
        background-color: var(--primary-color);
        color: white;
    }

    .modal-header-delete {
        background-color: var(--danger-color);
        color: white;
    }

    .form-label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
        font-size: 0.875rem;
        color: var(--secondary-color);
    }

    .form-group {
        margin-bottom: 1.25rem;
    }

    .form-check {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1rem;
    }

    .form-check-input {
        width: 1rem;
        height: 1rem;
        margin-top: 0;
    }

    .form-text {
        font-size: 0.75rem;
        color: var(--secondary-color);
        margin-top: 0.25rem;
    }

    .footer {
        text-align: center;
        font-size: 0.875rem;
        color: var(--secondary-color);
        padding: 1.5rem 0;
        border-top: 1px solid var(--border-color);
    }

    .empty-state {
        text-align: center;
        padding: 3rem 1rem;
        color: var(--secondary-color);
    }

    .empty-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        color: var(--border-color);
    }

    .empty-text {
        font-size: 1rem;
        margin-bottom: 1.5rem;
    }

    /* Responsive adjustments */
    @media (max-width: 992px) {
        .section-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 1rem;
        }

        .header {
            flex-direction: column;
            align-items: flex-start;
            gap: 1rem;
        }

        .navigation {
            width: 100%;
            justify-content: space-between;
        }
    }

    @media (max-width: 768px) {
        .category-grid {
            grid-template-columns: 1fr;
        }

        .nav-list {
            flex-wrap: wrap;
        }
    }

    @media (max-width: 576px) {
        .action-buttons {
            flex-direction: column;
        }
    }
</style>
</head>
<body>
<div class="app-container">
    <header class="header">
        <div class="brand">
            <i class="bi bi-wallet2 brand-icon"></i>
            <h1 class="brand-title" data-lang="app_title">Домашняя бухгалтерия</h1>
        </div>
        <div class="navigation">
            <nav>
                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="/v2/dashboard" data-lang="nav_dashboard">Дашборд</a>
                    </li>
                    <li class="nav-item">
                        <a href="/v2/calendar" data-lang="nav_calendar">Календарь</a>
                    </li>
                    <li class="nav-item">
                        <a href="/v2/reference/category" class="active" data-lang="nav_categories">Категории</a>
                    </li>
                    <li class="nav-item">
                        <a href="/v2" data-lang="nav_transactions">Операции</a>
                    </li>
                    <li class="nav-item">
                        <a href="/v2/auth" data-lang="nav_account">Аккаунт</a>
                    </li>
                </ul>
            </nav>
            <div class="language-selector">
                <button class="language-btn" onclick="changeLanguage('en')" title="English">
                    <img src="https://flagcdn.com/w40/gb.png" alt="English">
                </button>
                <button class="language-btn active" onclick="changeLanguage('ru')" title="Русский">
                    <img src="https://flagcdn.com/w40/ru.png" alt="Русский">
                </button>
                <button class="language-btn" onclick="changeLanguage('th')" title="ไทย">
                    <img src="https://flagcdn.com/w40/th.png" alt="ไทย">
                </button>
            </div>
        </div>
    </header>

    <!-- Main Section -->
    <section class="section">
        <div class="section-header">
            <h2 class="section-title" data-lang="categories_title">Категории домашней бухгалтерии</h2>
            <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addCategoryModal">
                <i class="bi bi-plus-lg"></i> <span data-lang="add_category">Добавить категорию</span>
            </button>
        </div>

        <div class="mb-4">
            <div class="input-group">
                <span class="input-group-text"><i class="bi bi-search"></i></span>
                <input type="text" class="form-control" data-lang-placeholder="search_categories" placeholder="Поиск категорий...">
            </div>
        </div>

        <div class="category-grid">
            <!-- Категории доходов -->
            {% for category in categories %}
                {% if category.type.value == 'income' %}
            <div class="category-card category-income">
                <div class="category-header">
                    <h3 class="category-title">
                        <div class="category-icon">
                            <i class="bi {{ category.icon }}"></i>
                        </div>
                        <span>{{ category.name }}</span>
                    </h3>
                    <span class="badge badge-income" data-lang="income">{{ category.type.value }}</span>
                </div>
                <div class="category-body">
                    <p class="category-description">{{ category.description }}</p>
                </div>
                <div class="category-footer">
                    <div class="action-buttons">
                        <button class="btn-icon btn-icon-primary" data-bs-toggle="modal" data-bs-target="#editCategoryModal">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button class="btn-icon btn-icon-danger" data-bs-toggle="modal" data-bs-target="#deleteCategoryModal">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                </div>
            </div>
                {% else %}
                    <div class="category-card category-expense">
                <div class="category-header">
                    <h3 class="category-title">
                        <div class="category-icon">
                            <i class="bi {{ category.icon }}"></i>
                        </div>
                        <span>{{ category.name }}</span>
                    </h3>
                    <span class="badge badge-expense" data-lang="expense">Расход</span>
                </div>
                <div class="category-body">
                    <p class="category-description">{{ category.description }}</p>
                </div>
                <div class="category-footer">
                    <div class="action-buttons">
                        <button class="btn-icon btn-icon-primary" data-bs-toggle="modal" data-bs-target="#editCategoryModal">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button class="btn-icon btn-icon-danger" data-bs-toggle="modal" data-bs-target="#deleteCategoryModal">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                </div>
            </div>
                {% endif %}
            {% endfor %}

            <div class="category-card category-income">
                <div class="category-header">
                    <h3 class="category-title">
                        <div class="category-icon">
                            <i class="bi bi-laptop"></i>
                        </div>
                        <span data-lang="income_freelance">Подработка</span>
                    </h3>
                    <span class="badge badge-income" data-lang="income">Доход</span>
                </div>
                <div class="category-body">
                    <p class="category-description" data-lang="freelance_description">Дополнительный доход от фриланса и подработок</p>
                </div>
                <div class="category-footer">
                    <div class="action-buttons">
                        <button class="btn-icon btn-icon-primary" data-bs-toggle="modal" data-bs-target="#editCategoryModal">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button class="btn-icon btn-icon-danger" data-bs-toggle="modal" data-bs-target="#deleteCategoryModal">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="category-card category-income">
                <div class="category-header">
                    <h3 class="category-title">
                        <div class="category-icon">
                            <i class="bi bi-bank"></i>
                        </div>
                        <span data-lang="income_interest">Проценты по вкладам</span>
                    </h3>
                    <span class="badge badge-income" data-lang="income">Доход</span>
                </div>
                <div class="category-body">
                    <p class="category-description" data-lang="interest_description">Доход от банковских вкладов и инвестиций</p>
                </div>
                <div class="category-footer">
                    <div class="action-buttons">
                        <button class="btn-icon btn-icon-primary" data-bs-toggle="modal" data-bs-target="#editCategoryModal">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button class="btn-icon btn-icon-danger" data-bs-toggle="modal" data-bs-target="#deleteCategoryModal">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Категории расходов -->
            <div class="category-card category-expense">
                <div class="category-header">
                    <h3 class="category-title">
                        <div class="category-icon">
                            <i class="bi bi-cart"></i>
                        </div>
                        <span data-lang="expense_groceries">Продукты</span>
                    </h3>
                    <span class="badge badge-expense" data-lang="expense">Расход</span>
                </div>
                <div class="category-body">
                    <p class="category-description" data-lang="groceries_description">Расходы на продукты питания и товары первой необходимости</p>
                </div>
                <div class="category-footer">
                    <div class="action-buttons">
                        <button class="btn-icon btn-icon-primary" data-bs-toggle="modal" data-bs-target="#editCategoryModal">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button class="btn-icon btn-icon-danger" data-bs-toggle="modal" data-bs-target="#deleteCategoryModal">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="category-card category-expense">
                <div class="category-header">
                    <h3 class="category-title">
                        <div class="category-icon">
                            <i class="bi bi-house"></i>
                        </div>
                        <span data-lang="expense_utilities">Коммунальные услуги</span>
                    </h3>
                    <span class="badge badge-expense" data-lang="expense">Расход</span>
                </div>
                <div class="category-body">
                    <p class="category-description" data-lang="utilities_description">Оплата коммунальных услуг, интернета и связи</p>
                </div>
                <div class="category-footer">
                    <div class="action-buttons">
                        <button class="btn-icon btn-icon-primary" data-bs-toggle="modal" data-bs-target="#editCategoryModal">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button class="btn-icon btn-icon-danger" data-bs-toggle="modal" data-bs-target="#deleteCategoryModal">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="category-card category-expense">
                <div class="category-header">
                    <h3 class="category-title">
                        <div class="category-icon">
                            <i class="bi bi-bus-front"></i>
                        </div>
                        <span data-lang="expense_transport">Транспорт</span>
                    </h3>
                    <span class="badge badge-expense" data-lang="expense">Расход</span>
                </div>
                <div class="category-body">
                    <p class="category-description" data-lang="transport_description">Расходы на общественный транспорт, такси и личный автомобиль</p>
                </div>
                <div class="category-footer">
                    <div class="action-buttons">
                        <button class="btn-icon btn-icon-primary" data-bs-toggle="modal" data-bs-target="#editCategoryModal">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button class="btn-icon btn-icon-danger" data-bs-toggle="modal" data-bs-target="#deleteCategoryModal">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="category-card category-expense">
                <div class="category-header">
                    <h3 class="category-title">
                        <div class="category-icon">
                            <i class="bi bi-film"></i>
                        </div>
                        <span data-lang="expense_entertainment">Развлечения</span>
                    </h3>
                    <span class="badge badge-expense" data-lang="expense">Расход</span>
                </div>
                <div class="category-body">
                    <p class="category-description" data-lang="entertainment_description">Расходы на развлечения, кино, рестораны и отдых</p>
                </div>
                <div class="category-footer">
                    <div class="action-buttons">
                        <button class="btn-icon btn-icon-primary" data-bs-toggle="modal" data-bs-target="#editCategoryModal">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button class="btn-icon btn-icon-danger" data-bs-toggle="modal" data-bs-target="#deleteCategoryModal">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="category-card category-expense">
                <div class="category-header">
                    <h3 class="category-title">
                        <div class="category-icon">
                            <i class="bi bi-heart-pulse"></i>
                        </div>
                        <span data-lang="expense_health">Здоровье</span>
                    </h3>
                    <span class="badge badge-expense" data-lang="expense">Расход</span>
                </div>
                <div class="category-body">
                    <p class="category-description" data-lang="health_description">Расходы на лекарства, медицинские услуги и здоровый образ жизни</p>
                </div>
                <div class="category-footer">
                    <div class="action-buttons">
                        <button class="btn-icon btn-icon-primary" data-bs-toggle="modal" data-bs-target="#editCategoryModal">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button class="btn-icon btn-icon-danger" data-bs-toggle="modal" data-bs-target="#deleteCategoryModal">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Модальное окно для добавления категории -->
    <div class="modal fade" id="addCategoryModal" tabindex="-1" aria-labelledby="addCategoryModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header modal-header-create">
                    <h5 class="modal-title" id="addCategoryModalLabel" data-lang="add_category_title">Добавление новой категории</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addCategoryForm" method="POST" action="/v2/reference/category">
                        <div class="form-group">
                            <label for="categoryName" class="form-label" data-lang="category_name">Название категории</label>
                            <input name="name" type="text" class="form-control" id="categoryName" required>
                        </div>
                        <div class="form-group">
                            <label for="categoryType" class="form-label" data-lang="category_type">Тип категории</label>
                            <select name="type" class="form-select" id="categoryType" required>
                                <option value="" data-lang="select_type">Выберите тип</option>
                                <option value="income" data-lang="income">Доход</option>
                                <option value="expense" data-lang="expense">Расход</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="categoryIcon" class="form-label" data-lang="category_icon">Иконка</label>
                            <select name="icon" class="form-select" id="categoryIcon" required>
                                <option value="bi-briefcase">📁 Портфель</option>
                                <option value="bi-laptop">💻 Ноутбук</option>
                                <option value="bi-bank">🏦 Банк</option>
                                <option value="bi-cart">🛒 Корзина</option>
                                <option value="bi-house">🏠 Дом</option>
                                <option value="bi-bus-front">🚌 Автобус</option>
                                <option value="bi-film">🎬 Кино</option>
                                <option value="bi-heart-pulse">❤️ Здоровье</option>
                                <option value="bi-gift">🎁 Подарок</option>
                                <option value="bi-book">📚 Книга</option>
                                <option value="bi-airplane">✈️ Самолет</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="categoryDescription" class="form-label" data-lang="category_description">Описание</label>
                            <textarea name="description" class="form-control" id="categoryDescription" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-lang="cancel">Отмена</button>
                    <button type="submit" form="addCategoryForm" class="btn btn-success" data-lang="add">Добавить</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно для редактирования категории -->
    <div class="modal fade" id="editCategoryModal" tabindex="-1" aria-labelledby="editCategoryModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header modal-header-edit">
                    <h5 class="modal-title" id="editCategoryModalLabel" data-lang="edit_category_title">Редактирование категории</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editCategoryForm">
                        <div class="form-group">
                            <label for="editCategoryName" class="form-label" data-lang="category_name">Название категории</label>
                            <input type="text" class="form-control" id="editCategoryName" value="Продукты" required>
                        </div>
                        <div class="form-group">
                            <label for="editCategoryType" class="form-label" data-lang="category_type">Тип категории</label>
                            <select class="form-select" id="editCategoryType" required>
                                <option value="income" data-lang="income">Доход</option>
                                <option value="expense" selected data-lang="expense">Расход</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editCategoryIcon" class="form-label" data-lang="category_icon">Иконка</label>
                            <select class="form-select" id="editCategoryIcon" required>
                                <option value="bi-briefcase">📁 Портфель</option>
                                <option value="bi-laptop">💻 Ноутбук</option>
                                <option value="bi-bank">🏦 Банк</option>
                                <option value="bi-cart" selected>🛒 Корзина</option>
                                <option value="bi-house">🏠 Дом</option>
                                <option value="bi-bus-front">🚌 Автобус</option>
                                <option value="bi-film">🎬 Кино</option>
                                <option value="bi-heart-pulse">❤️ Здоровье</option>
                                <option value="bi-gift">🎁 Подарок</option>
                                <option value="bi-book">📚 Книга</option>
                                <option value="bi-airplane">✈️ Самолет</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editCategoryDescription" class="form-label" data-lang="category_description">Описание</label>
                            <textarea class="form-control" id="editCategoryDescription" rows="3">Расходы на продукты питания и товары первой необходимости</textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-lang="cancel">Отмена</button>
                    <button type="submit" form="editCategoryForm" class="btn btn-primary" data-lang="save">Сохранить</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно для удаления категории -->
    <div class="modal fade" id="deleteCategoryModal" tabindex="-1" aria-labelledby="deleteCategoryModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header modal-header-delete">
                    <h5 class="modal-title" id="deleteCategoryModalLabel" data-lang="delete_category_title">Удаление категории</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p><span data-lang="delete_category_confirmation">Вы действительно хотите удалить категорию</span> <strong>"<span data-lang="expense_groceries">Продукты</span>"</strong>?</p>
                    <p class="text-danger" data-lang="delete_category_warning">Внимание! Все операции, связанные с этой категорией, также будут удалены. Это действие нельзя будет отменить.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-lang="cancel">Отмена</button>
                    <button type="button" class="btn btn-danger" data-lang="delete">Удалить</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        &copy; 2025 <span data-lang="app_title">Домашняя бухгалтерия</span>
    </footer>
</div>

<!-- Bootstrap JS Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Локализация -->
<script>
    // Словари для разных языков
    const dictionaries = {
        ru: {
            // Общие
            app_title: "Домашняя бухгалтерия",
            nav_categories: "Категории",
            nav_transactions: "Операции",
            nav_account: "Аккаунт",
            cancel: "Отмена",
            add: "Добавить",
            save: "Сохранить",
            delete: "Удалить",

            // Категории
            categories_title: "Категории домашней бухгалтерии",
            add_category: "Добавить категорию",
            search_categories: "Поиск категорий...",

            // Типы категорий
            income: "Доход",
            expense: "Расход",

            // Категории доходов
            income_salary: "Зарплата",
            income_freelance: "Подработка",
            income_interest: "Проценты по вкладам",

            // Категории расходов
            expense_groceries: "Продукты",
            expense_utilities: "Коммунальные услуги",
            expense_transport: "Транспорт",
            expense_entertainment: "Развлечения",
            expense_health: "Здоровье",

            // Описания категорий
            salary_description: "Регулярный доход от основного места работы",
            freelance_description: "Дополнительный доход от фриланса и подработок",
            interest_description: "Доход от банковских вкладов и инвестиций",
            groceries_description: "Расходы на продукты питания и товары первой необходимости",
            utilities_description: "Оплата коммунальных услуг, интернета и связи",
            transport_description: "Расходы на общественный транспорт, такси и личный автомобиль",
            entertainment_description: "Расходы на развлечения, кино, рестораны и отдых",
            health_description: "Расходы на лекарства, медицинские услуги и здоровый образ жизни",

            // Модальные окна
            add_category_title: "Добавление новой категории",
            edit_category_title: "Редактирование категории",
            delete_category_title: "Удаление категории",
            category_name: "Название категории",
            category_type: "Тип категории",
            category_icon: "Иконка",
            category_description: "Описание",
            select_type: "Выберите тип",
            delete_category_confirmation: "Вы действительно хотите удалить категорию",
            delete_category_warning: "Внимание! Все операции, связанные с этой категорией, также будут удалены. Это действие нельзя будет отменить."
        },
        en: {
            // General
            app_title: "Home Accounting",
            nav_categories: "Categories",
            nav_transactions: "Transactions",
            nav_account: "Account",
            cancel: "Cancel",
            add: "Add",
            save: "Save",
            delete: "Delete",

            // Categories
            categories_title: "Home Accounting Categories",
            add_category: "Add Category",
            search_categories: "Search categories...",

            // Category types
            income: "Income",
            expense: "Expense",

            // Income categories
            income_salary: "Salary",
            income_freelance: "Freelance",
            income_interest: "Interest",

            // Expense categories
            expense_groceries: "Groceries",
            expense_utilities: "Utilities",
            expense_transport: "Transportation",
            expense_entertainment: "Entertainment",
            expense_health: "Healthcare",

            // Category descriptions
            salary_description: "Regular income from main job",
            freelance_description: "Additional income from freelance work",
            interest_description: "Income from bank deposits and investments",
            groceries_description: "Expenses for food and essential goods",
            utilities_description: "Payment for utilities, internet and communication",
            transport_description: "Expenses for public transport, taxi and personal car",
            entertainment_description: "Expenses for entertainment, cinema, restaurants and recreation",
            health_description: "Expenses for medicines, medical services and healthy lifestyle",

            // Modal windows
            add_category_title: "Add New Category",
            edit_category_title: "Edit Category",
            delete_category_title: "Delete Category",
            category_name: "Category Name",
            category_type: "Category Type",
            category_icon: "Icon",
            category_description: "Description",
            select_type: "Select type",
            delete_category_confirmation: "Are you sure you want to delete the category",
            delete_category_warning: "Warning! All transactions associated with this category will also be deleted. This action cannot be undone."
        },
        th: {
            // ทั่วไป
            app_title: "บัญชีครัวเรือน",
            nav_categories: "หมวดหมู่",
            nav_transactions: "ธุรกรรม",
            nav_account: "บัญชีผู้ใช้",
            cancel: "ยกเลิก",
            add: "เพิ่ม",
            save: "บันทึก",
            delete: "ลบ",

            // หมวดหมู่
            categories_title: "หมวดหมู่บัญชีครัวเรือน",
            add_category: "เพิ่มหมวดหมู่",
            search_categories: "ค้นหาหมวดหมู่...",

            // ประเภทหมวดหมู่
            income: "รายรับ",
            expense: "รายจ่าย",

            // หมวดหมู่รายรับ
            income_salary: "เงินเดือน",
            income_freelance: "งานอิสระ",
            income_interest: "ดอกเบี้ย",

            // หมวดหมู่รายจ่าย
            expense_groceries: "ของชำ",
            expense_utilities: "สาธารณูปโภค",
            expense_transport: "การเดินทาง",
            expense_entertainment: "ความบันเทิง",
            expense_health: "สุขภาพ",

            // คำอธิบายหมวดหมู่
            salary_description: "รายได้ประจำจากงานหลัก",
            freelance_description: "รายได้เพิ่มเติมจากงานอิสระ",
            interest_description: "รายได้จากเงินฝากธนาคารและการลงทุน",
            groceries_description: "ค่าใช้จ่ายสำหรับอาหารและสินค้าจำเป็น",
            utilities_description: "การชำระค่าสาธารณูปโภค อินเทอร์เน็ต และการสื่อสาร",
            transport_description: "ค่าใช้จ่ายสำหรับการขนส่งสาธารณะ แท็กซี่ และรถยนต์ส่วนตัว",
            entertainment_description: "ค่าใช้จ่ายสำหรับความบันเทิง ภาพยนตร์ ร้านอาหาร และการพักผ่อน",
            health_description: "ค่าใช้จ่ายสำหรับยา บริการทางการแพทย์ และการมีชีวิตที่มีสุขภาพดี",

            // หน้าต่างโมดัล
            add_category_title: "เพิ่มหมวดหมู่ใหม่",
            edit_category_title: "แก้ไขหมวดหมู่",
            delete_category_title: "ลบหมวดหมู่",
            category_name: "ชื่อหมวดหมู่",
            category_type: "ประเภทหมวดหมู่",
            category_icon: "ไอคอน",
            category_description: "คำอธิบาย",
            select_type: "เลือกประเภท",
            delete_category_confirmation: "คุณแน่ใจหรือไม่ว่าต้องการลบหมวดหมู่",
            delete_category_warning: "คำเตือน! ธุรกรรมทั้งหมดที่เกี่ยวข้องกับหมวดหมู่นี้จะถูกลบด้วย การกระทำนี้ไม่สามารถยกเลิกได้"
        }
    };

    // Текущий язык (по умолчанию русский)
    let currentLang = 'ru';

    // Функция для изменения языка
    function changeLanguage(lang) {
        if (!dictionaries[lang]) return;

        currentLang = lang;

        // Обновляем атрибут lang у html
        document.documentElement.lang = lang;

        // Обновляем активную кнопку языка
        document.querySelectorAll('.language-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        document.querySelector(`.language-btn[onclick="changeLanguage('${lang}')"]`).classList.add('active');

        // Обновляем все элементы с атрибутом data-lang
        document.querySelectorAll('[data-lang]').forEach(element => {
            const key = element.getAttribute('data-lang');
            if (dictionaries[lang][key]) {
                element.textContent = dictionaries[lang][key];
            }
        });

        // Обновляем плейсхолдеры
        document.querySelectorAll('[data-lang-placeholder]').forEach(element => {
            const key = element.getAttribute('data-lang-placeholder');
            if (dictionaries[lang][key]) {
                element.placeholder = dictionaries[lang][key];
            }
        });

        // Обновляем опции в select
        document.querySelectorAll('option[data-lang]').forEach(option => {
            const key = option.getAttribute('data-lang');
            if (dictionaries[lang][key]) {
                option.textContent = dictionaries[lang][key];
            }
        });
    }

    // Инициализация при загрузке страницы
    document.addEventListener('DOMContentLoaded', function() {
        // Проверяем, есть ли сохраненный язык в localStorage
        const savedLang = localStorage.getItem('preferredLanguage');
        if (savedLang && dictionaries[savedLang]) {
            changeLanguage(savedLang);
        } else {
            // Если нет сохраненного языка, используем язык браузера или русский по умолчанию
            const browserLang = navigator.language.split('-')[0];
            if (dictionaries[browserLang]) {
                changeLanguage(browserLang);
            } else {
                changeLanguage('ru');
            }
        }

        document.getElementById('editCategoryForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // Здесь будет логика редактирования категории
            alert('Функция редактирования категории будет реализована на сервере');
            document.getElementById('editCategoryModal').querySelector('.btn-close').click();
        });
    });

    // Сохраняем выбранный язык в localStorage при изменении
    const originalChangeLanguage = changeLanguage;
    changeLanguage = function(lang) {
        originalChangeLanguage(lang);
        localStorage.setItem('preferredLanguage', lang);
    };
</script>
</body>
</html>