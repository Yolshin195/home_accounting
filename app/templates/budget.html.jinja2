<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Планирование бюджета - Домашняя бухгалтерия</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Chart.js -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.css">
    <style>
        :root {
            --primary-color: #5c6ac4;
            --primary-light: #f5f7ff;
            --primary-dark: #4c5aa9;
            --secondary-color: #6b7280;
            --success-color: #10b981;
            --success-light: rgba(16, 185, 129, 0.1);
            --danger-color: #ef4444;
            --danger-light: rgba(239, 68, 68, 0.1);
            --warning-color: #f59e0b;
            --warning-light: rgba(245, 158, 11, 0.1);
            --dark-color: #111827;
            --light-color: #f9fafb;
            --border-color: #e5e7eb;
            --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            --transition: all 0.2s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            color: var(--dark-color);
            background-color: #f3f4f6;
            line-height: 1.5;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        .header {
            background-color: white;
            box-shadow: var(--card-shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-inner {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .brand-icon {
            font-size: 1.75rem;
            color: var(--primary-color);
        }

        .brand-title {
            font-weight: 600;
            font-size: 1.25rem;
            color: var(--dark-color);
            margin: 0;
        }

        .navigation {
            display: flex;
            align-items: center;
        }

        .nav-list {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: 0.5rem;
        }

        .nav-item a {
            display: block;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            text-decoration: none;
            color: var(--secondary-color);
            font-weight: 500;
            transition: var(--transition);
        }

        .nav-item a:hover {
            background-color: var(--primary-light);
            color: var(--primary-color);
        }

        .nav-item a.active {
            background-color: var(--primary-color);
            color: white;
        }

        .language-selector {
            display: flex;
            margin-left: 1rem;
        }

        .language-btn {
            background: none;
            border: none;
            padding: 0.25rem;
            border-radius: 0.25rem;
            opacity: 0.6;
            transition: var(--transition);
        }

        .language-btn.active {
            opacity: 1;
            border: 2px solid var(--primary-color);
        }

        .language-btn:hover {
            opacity: 1;
            background-color: var(--primary-light);
        }

        .lang-text {
            font-weight: 600;
            font-size: 0.875rem;
        }

        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--dark-color);
            font-size: 1.5rem;
            cursor: pointer;
        }

        .mobile-menu-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        @media (min-width: 769px) {
            .mobile-menu-close {
                display: none;
            }
        }

        .page-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--dark-color);
        }

        .page-subtitle {
            font-size: 1.125rem;
            color: var(--secondary-color);
            margin-bottom: 2rem;
        }

        .card {
            background-color: white;
            border-radius: 1rem;
            box-shadow: var(--card-shadow);
            border: none;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }

        .card-header {
            background-color: white;
            border-bottom: 1px solid var(--border-color);
            padding: 1.25rem 1.5rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0;
            color: var(--dark-color);
        }

        .card-body {
            padding: 1.5rem;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-weight: 500;
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            text-decoration: none;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            color: white;
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background-color: #0da571;
            color: white;
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }

        .btn-outline:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }

        .btn-danger:hover {
            background-color: #e02424;
            color: white;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        .form-label {
            font-weight: 500;
            margin-bottom: 0.5rem;
            display: block;
        }

        .form-control {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(92, 106, 196, 0.1);
        }

        .form-select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: var(--transition);
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 16px 12px;
            appearance: none;
        }

        .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(92, 106, 196, 0.1);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            font-weight: 600;
            text-align: left;
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            color: var(--secondary-color);
        }

        .table td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            vertical-align: middle;
        }

        .table tr:last-child td {
            border-bottom: none;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.35rem 0.65rem;
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: 0.375rem;
        }

        .badge-success {
            background-color: var(--success-light);
            color: var(--success-color);
        }

        .badge-danger {
            background-color: var(--danger-light);
            color: var(--danger-color);
        }

        .badge-warning {
            background-color: var(--warning-light);
            color: var(--warning-color);
        }

        .progress {
            height: 0.75rem;
            background-color: var(--light-color);
            border-radius: 1rem;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            border-radius: 1rem;
        }

        .progress-bar-success {
            background-color: var(--success-color);
        }

        .progress-bar-danger {
            background-color: var(--danger-color);
        }

        .progress-bar-warning {
            background-color: var(--warning-color);
        }

        .progress-bar-primary {
            background-color: var(--primary-color);
        }

        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }

        .budget-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .summary-card {
            background-color: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: var(--card-shadow);
            display: flex;
            flex-direction: column;
        }

        .summary-title {
            font-size: 0.875rem;
            color: var(--secondary-color);
            margin-bottom: 0.5rem;
        }

        .summary-value {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .summary-change {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.875rem;
        }

        .summary-change-positive {
            color: var(--success-color);
        }

        .summary-change-negative {
            color: var(--danger-color);
        }

        .category-icon {
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.75rem;
            margin-right: 1rem;
            font-size: 1.25rem;
        }

        .category-icon-1 {
            background-color: var(--primary-light);
            color: var(--primary-color);
        }

        .category-icon-2 {
            background-color: var(--success-light);
            color: var(--success-color);
        }

        .category-icon-3 {
            background-color: var(--warning-light);
            color: var(--warning-color);
        }

        .category-icon-4 {
            background-color: var(--danger-light);
            color: var(--danger-color);
        }

        .budget-actions {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .budget-period-selector {
            display: flex;
            align-items: center;
            background-color: white;
            border-radius: 0.5rem;
            padding: 0.5rem;
            box-shadow: var(--card-shadow);
        }

        .period-btn {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-weight: 500;
            cursor: pointer;
            border: none;
            background: none;
            color: var(--secondary-color);
            transition: var(--transition);
        }

        .period-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        .period-btn:hover:not(.active) {
            background-color: var(--primary-light);
            color: var(--primary-color);
        }

        .budget-category-row {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .budget-category-info {
            flex: 1;
        }

        .budget-category-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .budget-category-progress {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-top: 0.5rem;
        }

        .budget-category-progress .progress {
            flex: 1;
        }

        .budget-category-values {
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
            color: var(--secondary-color);
            margin-top: 0.25rem;
        }

        .budget-category-actions {
            display: flex;
            gap: 0.5rem;
            margin-left: 1rem;
        }

        .action-btn {
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.375rem;
            background: none;
            border: none;
            color: var(--secondary-color);
            cursor: pointer;
            transition: var(--transition);
        }

        .action-btn:hover {
            background-color: var(--primary-light);
            color: var(--primary-color);
        }

        .modal-content {
            border-radius: 1rem;
            border: none;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
        }

        .modal-header {
            border-bottom: 1px solid var(--border-color);
            padding: 1.25rem 1.5rem;
        }

        .modal-title {
            font-weight: 600;
            font-size: 1.25rem;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            border-top: 1px solid var(--border-color);
            padding: 1.25rem 1.5rem;
        }

        .btn-close {
            background: transparent url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23000'%3e%3cpath d='M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z'/%3e%3c/svg%3e") center/1em auto no-repeat;
            opacity: 0.5;
            transition: var(--transition);
        }

        .btn-close:hover {
            opacity: 0.75;
        }

        .footer {
            background-color: white;
            border-top: 1px solid var(--border-color);
            padding: 1.5rem 0;
            margin-top: 3rem;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .footer-links {
            display: flex;
            gap: 1.5rem;
        }

        .footer-link {
            color: var(--secondary-color);
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-link:hover {
            color: var(--primary-color);
        }

        .footer-copyright {
            color: var(--secondary-color);
            font-size: 0.875rem;
        }

        @media (max-width: 992px) {
            .page-title {
                font-size: 1.75rem;
            }

            .budget-summary {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
            }

            .navigation {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                background-color: white;
                flex-direction: column;
                justify-content: center;
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                z-index: 1000;
            }

            .navigation.active {
                transform: translateX(0);
            }

            .nav-list {
                flex-direction: column;
                align-items: center;
                gap: 1rem;
            }

            .nav-item a {
                font-size: 1.25rem;
                padding: 0.75rem 2rem;
            }

            .language-selector {
                margin: 2rem 0 0;
            }

            .budget-actions {
                flex-direction: column;
            }

            .budget-period-selector {
                overflow-x: auto;
                width: 100%;
            }

            .footer-content {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .footer-links {
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        @media (max-width: 576px) {
            .budget-summary {
                grid-template-columns: 1fr;
            }

            .budget-category-row {
                flex-direction: column;
                align-items: flex-start;
            }

            .budget-category-actions {
                margin-left: 0;
                margin-top: 1rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-inner">
                <div class="brand">
                    <i class="bi bi-wallet2 brand-icon"></i>
                    <h1 class="brand-title" data-lang="app_title">Домашняя бухгалтерия</h1>
                </div>

                <button class="mobile-menu-toggle" id="mobileMenuToggle">
                    <i class="bi bi-list"></i>
                </button>

                <div class="navigation" id="navigation">
                    <button class="mobile-menu-close" id="mobileMenuClose">
                        <i class="bi bi-x-lg"></i>
                    </button>

                    <nav>
                        <ul class="nav-list">
                            <li class="nav-item">
                                <a href="landing.html" data-lang="nav_home">Главная</a>
                            </li>
                            <li class="nav-item">
                                <a href="transactions.html" data-lang="nav_transactions">Транзакции</a>
                            </li>
                            <li class="nav-item">
                                <a href="categories.html" data-lang="nav_categories">Категории</a>
                            </li>
                            <li class="nav-item">
                                <a href="calendar.html" data-lang="nav_calendar">Календарь</a>
                            </li>
                            <li class="nav-item">
                                <a href="budget.html" class="active" data-lang="nav_budget">Бюджет</a>
                            </li>
                        </ul>
                    </nav>

                    <div class="language-selector">
                        <button class="language-btn" onclick="changeLanguage('en')" title="English">
                            <span class="lang-text">EN</span>
                        </button>
                        <button class="language-btn active" onclick="changeLanguage('ru')" title="Русский">
                            <span class="lang-text">RU</span>
                        </button>
                        <button class="language-btn" onclick="changeLanguage('th')" title="ไทย">
                            <span class="lang-text">TH</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="container" style="padding-top: 2rem; padding-bottom: 2rem;">
        <h1 class="page-title" data-lang="budget_title">Планирование бюджета</h1>
        <p class="page-subtitle" data-lang="budget_subtitle">Создавайте и управляйте бюджетом для достижения финансовых целей</p>

        <div class="budget-summary">
            <div class="summary-card">
                <span class="summary-title" data-lang="budget_total_income">Общий доход</span>
                <span class="summary-value">75 000 ₽</span>
                <div class="summary-change summary-change-positive">
                    <i class="bi bi-arrow-up"></i>
                    <span>5.2%</span>
                </div>
            </div>
            <div class="summary-card">
                <span class="summary-title" data-lang="budget_total_expenses">Общие расходы</span>
                <span class="summary-value">52 300 ₽</span>
                <div class="summary-change summary-change-negative">
                    <i class="bi bi-arrow-up"></i>
                    <span>3.8%</span>
                </div>
            </div>
            <div class="summary-card">
                <span class="summary-title" data-lang="budget_savings">Сбережения</span>
                <span class="summary-value">22 700 ₽</span>
                <div class="summary-change summary-change-positive">
                    <i class="bi bi-arrow-up"></i>
                    <span>8.5%</span>
                </div>
            </div>
            <div class="summary-card">
                <span class="summary-title" data-lang="budget_savings_rate">Норма сбережений</span>
                <span class="summary-value">30.3%</span>
                <div class="summary-change summary-change-positive">
                    <i class="bi bi-arrow-up"></i>
                    <span>2.1%</span>
                </div>
            </div>
        </div>

        <div class="budget-actions">
            <div class="budget-period-selector">
                <button class="period-btn" data-period="week" data-lang="budget_period_week">Неделя</button>
                <button class="period-btn active" data-period="month" data-lang="budget_period_month">Месяц</button>
                <button class="period-btn" data-period="quarter" data-lang="budget_period_quarter">Квартал</button>
                <button class="period-btn" data-period="year" data-lang="budget_period_year">Год</button>
                <button class="period-btn" data-period="custom" data-lang="budget_period_custom">Свой</button>
            </div>
            <button class="btn btn-primary" id="createBudgetBtn" data-lang="budget_create_new">
                <i class="bi bi-plus-lg"></i>
                <span>Создать новый бюджет</span>
            </button>
        </div>

        <div class="row">
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title" data-lang="budget_categories">Бюджет по категориям</h2>
                    </div>
                    <div class="card-body">
                        <div class="budget-category-row">
                            <div class="category-icon category-icon-1">
                                <i class="bi bi-house"></i>
                            </div>
                            <div class="budget-category-info">
                                <div class="budget-category-name" data-lang="budget_category_housing">Жилье</div>
                                <div class="budget-category-progress">
                                    <div class="progress" style="flex: 1;">
                                        <div class="progress-bar progress-bar-success" style="width: 75%"></div>
                                    </div>
                                    <span>15 000 / 20 000 ₽</span>
                                </div>
                                <div class="budget-category-values">
                                    <span data-lang="budget_spent">Потрачено: 15 000 ₽</span>
                                    <span data-lang="budget_remaining">Осталось: 5 000 ₽</span>
                                </div>
                            </div>
                            <div class="budget-category-actions">
                                <button class="action-btn" title="Редактировать">
                                    <i class="bi bi-pencil"></i>
                                </button>
                                <button class="action-btn" title="Удалить">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </div>
                        </div>

                        <div class="budget-category-row">
                            <div class="category-icon category-icon-2">
                                <i class="bi bi-cart"></i>
                            </div>
                            <div class="budget-category-info">
                                <div class="budget-category-name" data-lang="budget_category_groceries">Продукты</div>
                                <div class="budget-category-progress">
                                    <div class="progress" style="flex: 1;">
                                        <div class="progress-bar progress-bar-warning" style="width: 90%"></div>
                                    </div>
                                    <span>18 000 / 20 000 ₽</span>
                                </div>
                                <div class="budget-category-values">
                                    <span data-lang="budget_spent">Потрачено: 18 000 ₽</span>
                                    <span data-lang="budget_remaining">Осталось: 2 000 ₽</span>
                                </div>
                            </div>
                            <div class="budget-category-actions">
                                <button class="action-btn" title="Редактировать">
                                    <i class="bi bi-pencil"></i>
                                </button>
                                <button class="action-btn" title="Удалить">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </div>
                        </div>

                        <div class="budget-category-row">
                            <div class="category-icon category-icon-3">
                                <i class="bi bi-car-front"></i>
                            </div>
                            <div class="budget-category-info">
                                <div class="budget-category-name" data-lang="budget_category_transport">Транспорт</div>
                                <div class="budget-category-progress">
                                    <div class="progress" style="flex: 1;">
                                        <div class="progress-bar progress-bar-danger" style="width: 110%"></div>
                                    </div>
                                    <span>5 500 / 5 000 ₽</span>
                                </div>
                                <div class="budget-category-values">
                                    <span data-lang="budget_spent">Потрачено: 5 500 ₽</span>
                                    <span data-lang="budget_remaining">Перерасход: 500 ₽</span>
                                </div>
                            </div>
                            <div class="budget-category-actions">
                                <button class="action-btn" title="Редактировать">
                                    <i class="bi bi-pencil"></i>
                                </button>
                                <button class="action-btn" title="Удалить">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </div>
                        </div>

                        <div class="budget-category-row">
                            <div class="category-icon category-icon-4">
                                <i class="bi bi-cup-hot"></i>
                            </div>
                            <div class="budget-category-info">
                                <div class="budget-category-name" data-lang="budget_category_entertainment">Развлечения</div>
                                <div class="budget-category-progress">
                                    <div class="progress" style="flex: 1;">
                                        <div class="progress-bar progress-bar-success" style="width: 60%"></div>
                                    </div>
                                    <span>6 000 / 10 000 ₽</span>
                                </div>
                                <div class="budget-category-values">
                                    <span data-lang="budget_spent">Потрачено: 6 000 ₽</span>
                                    <span data-lang="budget_remaining">Осталось: 4 000 ₽</span>
                                </div>
                            </div>
                            <div class="budget-category-actions">
                                <button class="action-btn" title="Редактировать">
                                    <i class="bi bi-pencil"></i>
                                </button>
                                <button class="action-btn" title="Удалить">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </div>
                        </div>

                        <div class="budget-category-row">
                            <div class="category-icon category-icon-1">
                                <i class="bi bi-heart-pulse"></i>
                            </div>
                            <div class="budget-category-info">
                                <div class="budget-category-name" data-lang="budget_category_health">Здоровье</div>
                                <div class="budget-category-progress">
                                    <div class="progress" style="flex: 1;">
                                        <div class="progress-bar progress-bar-success" style="width: 40%"></div>
                                    </div>
                                    <span>3 000 / 7 500 ₽</span>
                                </div>
                                <div class="budget-category-values">
                                    <span data-lang="budget_spent">Потрачено: 3 000 ₽</span>
                                    <span data-lang="budget_remaining">Осталось: 4 500 ₽</span>
                                </div>
                            </div>
                            <div class="budget-category-actions">
                                <button class="action-btn" title="Редактировать">
                                    <i class="bi bi-pencil"></i>
                                </button>
                                <button class="action-btn" title="Удалить">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </div>
                        </div>

                        <div class="budget-category-row">
                            <div class="category-icon category-icon-2">
                                <i class="bi bi-book"></i>
                            </div>
                            <div class="budget-category-info">
                                <div class="budget-category-name" data-lang="budget_category_education">Образование</div>
                                <div class="budget-category-progress">
                                    <div class="progress" style="flex: 1;">
                                        <div class="progress-bar progress-bar-success" style="width: 25%"></div>
                                    </div>
                                    <span>1 250 / 5 000 ₽</span>
                                </div>
                                <div class="budget-category-values">
                                    <span data-lang="budget_spent">Потрачено: 1 250 ₽</span>
                                    <span data-lang="budget_remaining">Осталось: 3 750 ₽</span>
                                </div>
                            </div>
                            <div class="budget-category-actions">
                                <button class="action-btn" title="Редактировать">
                                    <i class="bi bi-pencil"></i>
                                </button>
                                <button class="action-btn" title="Удалить">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title" data-lang="budget_distribution">Распределение бюджета</h2>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="budgetDistributionChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title" data-lang="budget_vs_actual">План vs Факт</h2>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="budgetVsActualChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title" data-lang="budget_tips">Советы по бюджету</h2>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-primary" role="alert">
                            <i class="bi bi-info-circle me-2"></i>
                            <span data-lang="budget_tip_1">Старайтесь тратить не более 30% дохода на жилье.</span>
                        </div>
                        <div class="alert alert-warning" role="alert">
                            <i class="bi bi-exclamation-triangle me-2"></i>
                            <span data-lang="budget_tip_2">Вы приближаетесь к лимиту в категории "Продукты".</span>
                        </div>
                        <div class="alert alert-danger" role="alert">
                            <i class="bi bi-exclamation-circle me-2"></i>
                            <span data-lang="budget_tip_3">Вы превысили бюджет в категории "Транспорт".</span>
                        </div>
                        <div class="alert alert-success" role="alert">
                            <i class="bi bi-check-circle me-2"></i>
                            <span data-lang="budget_tip_4">Отлично! Вы сэкономили 30% от запланированного бюджета.</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Модальное окно для создания/редактирования бюджета -->
    <div class="modal fade" id="budgetModal" tabindex="-1" aria-labelledby="budgetModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="budgetModalLabel" data-lang="budget_create_new">Создать новый бюджет</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="budgetForm">
                        <div class="form-group">
                            <label for="budgetName" class="form-label" data-lang="budget_name">Название бюджета</label>
                            <input type="text" class="form-control" id="budgetName" placeholder="Например: Бюджет на май 2025">
                        </div>
                        <div class="form-group">
                            <label for="budgetPeriod" class="form-label" data-lang="budget_period">Период</label>
                            <select class="form-select" id="budgetPeriod">
                                <option value="week" data-lang="budget_period_week">Неделя</option>
                                <option value="month" selected data-lang="budget_period_month">Месяц</option>
                                <option value="quarter" data-lang="budget_period_quarter">Квартал</option>
                                <option value="year" data-lang="budget_period_year">Год</option>
                                <option value="custom" data-lang="budget_period_custom">Свой</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="budgetStartDate" class="form-label" data-lang="budget_start_date">Дата начала</label>
                            <input type="date" class="form-control" id="budgetStartDate">
                        </div>
                        <div class="form-group">
                            <label for="budgetEndDate" class="form-label" data-lang="budget_end_date">Дата окончания</label>
                            <input type="date" class="form-control" id="budgetEndDate">
                        </div>
                        <div class="form-group">
                            <label for="budgetIncome" class="form-label" data-lang="budget_income">Доход</label>
                            <input type="number" class="form-control" id="budgetIncome" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-lang="budget_categories">Категории</label>
                            <div id="budgetCategories">
                                <div class="budget-category-item mb-3">
                                    <div class="d-flex align-items-center mb-2">
                                        <select class="form-select me-2">
                                            <option value="housing" data-lang="budget_category_housing">Жилье</option>
                                            <option value="groceries" data-lang="budget_category_groceries">Продукты</option>
                                            <option value="transport" data-lang="budget_category_transport">Транспорт</option>
                                            <option value="entertainment" data-lang="budget_category_entertainment">Развлечения</option>
                                            <option value="health" data-lang="budget_category_health">Здоровье</option>
                                            <option value="education" data-lang="budget_category_education">Образование</option>
                                        </select>
                                        <input type="number" class="form-control" placeholder="Сумма">
                                        <button type="button" class="btn btn-sm btn-danger ms-2">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <button type="button" class="btn btn-sm btn-outline" id="addCategoryBtn" data-lang="budget_add_category">
                                <i class="bi bi-plus-lg"></i>
                                <span>Добавить категорию</span>
                            </button>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" data-bs-dismiss="modal" data-lang="budget_cancel">Отмена</button>
                    <button type="button" class="btn btn-primary" id="saveBudgetBtn" data-lang="budget_save">Сохранить</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="#" class="footer-link" data-lang="footer_help">Помощь</a>
                    <a href="#" class="footer-link" data-lang="footer_privacy">Конфиденциальность</a>
                    <a href="#" class="footer-link" data-lang="footer_terms">Условия использования</a>
                </div>
                <div class="footer-copyright">
                    &copy; 2025 <span data-lang="app_title">Домашняя бухгалтерия</span>. <span data-lang="footer_rights">Все права защищены.</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>

    <script>
        // Словари для разных языков
        const dictionaries = {
            ru: {
                // Общие
                app_title: "Домашняя бухгалтерия",
                nav_home: "Главная",
                nav_transactions: "Транзакции",
                nav_categories: "Категории",
                nav_calendar: "Календарь",
                nav_budget: "Бюджет",

                // Бюджет
                budget_title: "Планирование бюджета",
                budget_subtitle: "Создавайте и управляйте бюджетом для достижения финансовых целей",
                budget_total_income: "Общий доход",
                budget_total_expenses: "Общие расходы",
                budget_savings: "Сбережения",
                budget_savings_rate: "Норма сбережений",
                budget_period_week: "Неделя",
                budget_period_month: "Месяц",
                budget_period_quarter: "Квартал",
                budget_period_year: "Год",
                budget_period_custom: "Свой",
                budget_create_new: "Создать новый бюджет",
                budget_categories: "Бюджет по категориям",
                budget_category_housing: "Жилье",
                budget_category_groceries: "Продукты",
                budget_category_transport: "Транспорт",
                budget_category_entertainment: "Развлечения",
                budget_category_health: "Здоровье",
                budget_category_education: "Образование",
                budget_spent: "Потрачено:",
                budget_remaining: "Осталось:",
                budget_distribution: "Распределение бюджета",
                budget_vs_actual: "План vs Факт",
                budget_tips: "Советы по бюджету",
                budget_tip_1: "Старайтесь тратить не более 30% дохода на жилье.",
                budget_tip_2: "Вы приближаетесь к лимиту в категории \"Продукты\".",
                budget_tip_3: "Вы превысили бюджет в категории \"Транспорт\".",
                budget_tip_4: "Отлично! Вы сэкономили 30% от запланированного бюджета.",
                budget_name: "Название бюджета",
                budget_period: "Период",
                budget_start_date: "Дата начала",
                budget_end_date: "Дата окончания",
                budget_income: "Доход",
                budget_add_category: "Добавить категорию",
                budget_cancel: "Отмена",
                budget_save: "Сохранить",

                // Футер
                footer_help: "Помощь",
                footer_privacy: "Конфиденциальность",
                footer_terms: "Условия использования",
                footer_rights: "Все права защищены."
            },
            en: {
                // General
                app_title: "Home Accounting",
                nav_home: "Home",
                nav_transactions: "Transactions",
                nav_categories: "Categories",
                nav_calendar: "Calendar",
                nav_budget: "Budget",

                // Budget
                budget_title: "Budget Planning",
                budget_subtitle: "Create and manage your budget to achieve financial goals",
                budget_total_income: "Total Income",
                budget_total_expenses: "Total Expenses",
                budget_savings: "Savings",
                budget_savings_rate: "Savings Rate",
                budget_period_week: "Week",
                budget_period_month: "Month",
                budget_period_quarter: "Quarter",
                budget_period_year: "Year",
                budget_period_custom: "Custom",
                budget_create_new: "Create New Budget",
                budget_categories: "Budget by Categories",
                budget_category_housing: "Housing",
                budget_category_groceries: "Groceries",
                budget_category_transport: "Transport",
                budget_category_entertainment: "Entertainment",
                budget_category_health: "Health",
                budget_category_education: "Education",
                budget_spent: "Spent:",
                budget_remaining: "Remaining:",
                budget_distribution: "Budget Distribution",
                budget_vs_actual: "Budget vs Actual",
                budget_tips: "Budget Tips",
                budget_tip_1: "Try to spend no more than 30% of your income on housing.",
                budget_tip_2: "You are approaching the limit in the \"Groceries\" category.",
                budget_tip_3: "You have exceeded the budget in the \"Transport\" category.",
                budget_tip_4: "Great! You saved 30% of your planned budget.",
                budget_name: "Budget Name",
                budget_period: "Period",
                budget_start_date: "Start Date",
                budget_end_date: "End Date",
                budget_income: "Income",
                budget_add_category: "Add Category",
                budget_cancel: "Cancel",
                budget_save: "Save",

                // Footer
                footer_help: "Help",
                footer_privacy: "Privacy",
                footer_terms: "Terms of Use",
                footer_rights: "All rights reserved."
            },
            th: {
                // ทั่วไป
                app_title: "บัญชีครัวเรือน",
                nav_home: "หน้าหลัก",
                nav_transactions: "ธุรกรรม",
                nav_categories: "หมวดหมู่",
                nav_calendar: "ปฏิทิน",
                nav_budget: "งบประมาณ",

                // งบประมาณ
                budget_title: "การวางแผนงบประมาณ",
                budget_subtitle: "สร้างและจัดการงบประมาณของคุณเพื่อบรรลุเป้าหมายทางการเงิน",
                budget_total_income: "รายได้รวม",
                budget_total_expenses: "ค่าใช้จ่ายรวม",
                budget_savings: "เงินออม",
                budget_savings_rate: "อัตราการออม",
                budget_period_week: "สัปดาห์",
                budget_period_month: "เดือน",
                budget_period_quarter: "ไตรมาส",
                budget_period_year: "ปี",
                budget_period_custom: "กำหนดเอง",
                budget_create_new: "สร้างงบประมาณใหม่",
                budget_categories: "งบประมาณตามหมวดหมู่",
                budget_category_housing: "ที่อยู่อาศัย",
                budget_category_groceries: "ของชำ",
                budget_category_transport: "การขนส่ง",
                budget_category_entertainment: "ความบันเทิง",
                budget_category_health: "สุขภาพ",
                budget_category_education: "การศึกษา",
                budget_spent: "ใช้ไป:",
                budget_remaining: "คงเหลือ:",
                budget_distribution: "การกระจายงบประมาณ",
                budget_vs_actual: "แผนเทียบกับจริง",
                budget_tips: "เคล็ดลับงบประมาณ",
                budget_tip_1: "พยายามใช้จ่ายไม่เกิน 30% ของรายได้สำหรับที่อยู่อาศัย",
                budget_tip_2: "คุณกำลังเข้าใกล้ขีดจำกัดในหมวดหมู่ \"ของชำ\"",
                budget_tip_3: "คุณใช้งบประมาณเกินในหมวดหมู่ \"การขนส่ง\"",
                budget_tip_4: "ยอดเยี่ยม! คุณประหยัดได้ 30% ของงบประมาณที่วางแผนไว้",
                budget_name: "ชื่องบประมาณ",
                budget_period: "ระยะเวลา",
                budget_start_date: "วันที่เริ่มต้น",
                budget_end_date: "วันที่สิ้นสุด",
                budget_income: "รายได้",
                budget_add_category: "เพิ่มหมวดหมู่",
                budget_cancel: "ยกเลิก",
                budget_save: "บันทึก",

                // ส่วนท้าย
                footer_help: "ช่วยเหลือ",
                footer_privacy: "ความเป็นส่วนตัว",
                footer_terms: "เงื่อนไขการใช้งาน",
                footer_rights: "สงวนลิขสิทธิ์ทั้งหมด"
            }
        };

        // Текущий язык (по умолчанию русский)
        let currentLang = 'ru';

        // Функция для изменения языка
        function changeLanguage(lang) {
            if (!dictionaries[lang]) return;

            currentLang = lang;

            // Обновляем атрибут lang у html
            document.documentElement.lang = lang;

            // Обновляем активную кнопку языка
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.language-btn[onclick="changeLanguage('${lang}')"]`).classList.add('active');

            // Обновляем все элементы с атрибутом data-lang
            document.querySelectorAll('[data-lang]').forEach(element => {
                const key = element.getAttribute('data-lang');
                if (dictionaries[lang][key]) {
                    element.textContent = dictionaries[lang][key];
                }
            });

            // Обновляем графики
            updateCharts();
        }

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            // Проверяем, есть ли сохраненный язык в localStorage
            const savedLang = localStorage.getItem('preferredLanguage');
            if (savedLang && dictionaries[savedLang]) {
                changeLanguage(savedLang);
            } else {
                // Если нет сохраненного языка, используем язык браузера или русский по умолчанию
                const browserLang = navigator.language.split('-')[0];
                if (dictionaries[browserLang]) {
                    changeLanguage(browserLang);
                } else {
                    changeLanguage('ru');
                }
            }

            // Мобильное меню
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const mobileMenuClose = document.getElementById('mobileMenuClose');
            const navigation = document.getElementById('navigation');

            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', function() {
                    navigation.classList.add('active');
                });
            }

            if (mobileMenuClose) {
                mobileMenuClose.addEventListener('click', function() {
                    navigation.classList.remove('active');
                });
            }

            // Закрытие мобильного меню при клике на ссылку
            document.querySelectorAll('.nav-item a').forEach(link => {
                link.addEventListener('click', function() {
                    navigation.classList.remove('active');
                });
            });

            // Инициализация графиков
            initCharts();

            // Обработчики для кнопок периода
            document.querySelectorAll('.period-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.period-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // Модальное окно для создания бюджета
            const budgetModal = new bootstrap.Modal(document.getElementById('budgetModal'));

            document.getElementById('createBudgetBtn').addEventListener('click', function() {
                budgetModal.show();
            });

            // Добавление категории в форму бюджета
            document.getElementById('addCategoryBtn').addEventListener('click', function() {
                const categoryItem = document.createElement('div');
                categoryItem.className = 'budget-category-item mb-3';
                categoryItem.innerHTML = `
                    <div class="d-flex align-items-center mb-2">
                        <select class="form-select me-2">
                            <option value="housing" data-lang="budget_category_housing">${dictionaries[currentLang].budget_category_housing}</option>
                            <option value="groceries" data-lang="budget_category_groceries">${dictionaries[currentLang].budget_category_groceries}</option>
                            <option value="transport" data-lang="budget_category_transport">${dictionaries[currentLang].budget_category_transport}</option>
                            <option value="entertainment" data-lang="budget_category_entertainment">${dictionaries[currentLang].budget_category_entertainment}</option>
                            <option value="health" data-lang="budget_category_health">${dictionaries[currentLang].budget_category_health}</option>
                            <option value="education" data-lang="budget_category_education">${dictionaries[currentLang].budget_category_education}</option>
                        </select>
                        <input type="number" class="form-control" placeholder="Сумма">
                        <button type="button" class="btn btn-sm btn-danger ms-2">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                `;

                document.getElementById('budgetCategories').appendChild(categoryItem);

                // Добавляем обработчик для кнопки удаления
                categoryItem.querySelector('.btn-danger').addEventListener('click', function() {
                    categoryItem.remove();
                });
            });

            // Сохранение бюджета
            document.getElementById('saveBudgetBtn').addEventListener('click', function() {
                // Здесь будет логика сохранения бюджета
                budgetModal.hide();

                // Показываем уведомление об успешном сохранении
                alert(dictionaries[currentLang].budget_save + '!');
            });

            // Сохраняем выбранный язык в localStorage при изменении
            window.changeLanguage = function(lang) {
                if (!dictionaries[lang]) return;

                currentLang = lang;

                // Обновляем атрибут lang у html
                document.documentElement.lang = lang;

                // Обновляем активную кнопку языка
                document.querySelectorAll('.language-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`.language-btn[onclick="changeLanguage('${lang}')"]`).classList.add('active');

                // Обновляем все элементы с атрибутом data-lang
                document.querySelectorAll('[data-lang]').forEach(element => {
                    const key = element.getAttribute('data-lang');
                    if (dictionaries[lang][key]) {
                        element.textContent = dictionaries[lang][key];
                    }
                });

                // Обновляем графики
                updateCharts();

                localStorage.setItem('preferredLanguage', lang);
            };
        });

        // Инициализация графиков
        let budgetDistributionChart, budgetVsActualChart;

        function initCharts() {
            // График распределения бюджета
            const distributionCtx = document.getElementById('budgetDistributionChart').getContext('2d');
            budgetDistributionChart = new Chart(distributionCtx, {
                type: 'doughnut',
                data: {
                    labels: [
                        dictionaries[currentLang].budget_category_housing,
                        dictionaries[currentLang].budget_category_groceries,
                        dictionaries[currentLang].budget_category_transport,
                        dictionaries[currentLang].budget_category_entertainment,
                        dictionaries[currentLang].budget_category_health,
                        dictionaries[currentLang].budget_category_education
                    ],
                    datasets: [{
                        data: [20000, 20000, 5000, 10000, 7500, 5000],
                        backgroundColor: [
                            '#5c6ac4',
                            '#10b981',
                            '#f59e0b',
                            '#ef4444',
                            '#8b5cf6',
                            '#3b82f6'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                boxWidth: 12
                            }
                        }
                    },
                    cutout: '70%'
                }
            });

            // График План vs Факт
            const actualCtx = document.getElementById('budgetVsActualChart').getContext('2d');
            budgetVsActualChart = new Chart(actualCtx, {
                type: 'bar',
                data: {
                    labels: [
                        dictionaries[currentLang].budget_category_housing,
                        dictionaries[currentLang].budget_category_groceries,
                        dictionaries[currentLang].budget_category_transport,
                        dictionaries[currentLang].budget_category_entertainment,
                        dictionaries[currentLang].budget_category_health,
                        dictionaries[currentLang].budget_category_education
                    ],
                    datasets: [
                        {
                            label: dictionaries[currentLang].budget_period_month,
                            data: [20000, 20000, 5000, 10000, 7500, 5000],
                            backgroundColor: 'rgba(92, 106, 196, 0.6)',
                            borderColor: 'rgba(92, 106, 196, 1)',
                            borderWidth: 1
                        },
                        {
                            label: dictionaries[currentLang].budget_spent,
                            data: [15000, 18000, 5500, 6000, 3000, 1250],
                            backgroundColor: 'rgba(16, 185, 129, 0.6)',
                            borderColor: 'rgba(16, 185, 129, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                boxWidth: 12
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Обновление графиков при смене языка
        function updateCharts() {
            if (budgetDistributionChart) {
                budgetDistributionChart.data.labels = [
                    dictionaries[currentLang].budget_category_housing,
                    dictionaries[currentLang].budget_category_groceries,
                    dictionaries[currentLang].budget_category_transport,
                    dictionaries[currentLang].budget_category_entertainment,
                    dictionaries[currentLang].budget_category_health,
                    dictionaries[currentLang].budget_category_education
                ];
                budgetDistributionChart.update();
            }

            if (budgetVsActualChart) {
                budgetVsActualChart.data.labels = [
                    dictionaries[currentLang].budget_category_housing,
                    dictionaries[currentLang].budget_category_groceries,
                    dictionaries[currentLang].budget_category_transport,
                    dictionaries[currentLang].budget_category_entertainment,
                    dictionaries[currentLang].budget_category_health,
                    dictionaries[currentLang].budget_category_education
                ];
                budgetVsActualChart.data.datasets[0].label = dictionaries[currentLang].budget_period_month;
                budgetVsActualChart.data.datasets[1].label = dictionaries[currentLang].budget_spent;
                budgetVsActualChart.update();
            }
        }
    </script>
</body>
</html>
