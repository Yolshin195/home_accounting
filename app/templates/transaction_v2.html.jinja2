<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Учет расходов и доходов - Домашняя бухгалтерия</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <!-- Flatpickr (для выбора даты) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #5c6ac4;
            --primary-light: #f5f7ff;
            --secondary-color: #6b7280;
            --success-color: #10b981;
            --success-light: rgba(16, 185, 129, 0.1);
            --danger-color: #ef4444;
            --danger-light: rgba(239, 68, 68, 0.1);
            --warning-color: #f59e0b;
            --dark-color: #111827;
            --light-color: #f9fafb;
            --border-color: #e5e7eb;
            --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            --transition: all 0.2s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            color: var(--dark-color);
            background-color: #f3f4f6;
            line-height: 1.5;
        }

        .app-container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        .header {
            background-color: white;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--card-shadow);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .brand-icon {
            font-size: 1.75rem;
            color: var(--primary-color);
        }

        .brand-title {
            font-weight: 600;
            font-size: 1.25rem;
            color: var(--dark-color);
            margin: 0;
        }

        .navigation {
            display: flex;
            align-items: center;
        }

        .nav-list {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: 0.5rem;
        }

        .nav-item a {
            display: block;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            text-decoration: none;
            color: var(--secondary-color);
            font-weight: 500;
            transition: var(--transition);
        }

        .nav-item a:hover {
            background-color: var(--primary-light);
            color: var(--primary-color);
        }

        .nav-item a.active {
            background-color: var(--primary-color);
            color: white;
        }

        .language-selector {
            display: flex;
            margin-left: 1rem;
        }

        .language-btn {
            background: none;
            border: none;
            padding: 0.25rem;
            border-radius: 0.25rem;
            opacity: 0.6;
            transition: var(--transition);
        }

        .language-btn.active {
            opacity: 1;
            border: 2px solid var(--primary-color);
        }

        .language-btn:hover {
            opacity: 1;
            background-color: var(--primary-light);
        }

        .language-btn img {
            width: 24px;
            height: 24px;
            border-radius: 4px;
        }

        .section {
            background-color: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--card-shadow);
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--dark-color);
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .summary-card {
            background-color: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }

        .summary-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
        }

        .summary-title {
            color: var(--secondary-color);
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .summary-value {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .income-value {
            color: var(--success-color);
        }

        .expense-value {
            color: var(--danger-color);
        }

        .balance-value {
            color: var(--primary-color);
        }

        .count-value {
            color: var(--warning-color);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-weight: 500;
            border-radius: 0.5rem;
            padding: 0.625rem 1rem;
            transition: var(--transition);
            cursor: pointer;
            border: none;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: #4c5aa9;
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background-color: #0da571;
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }

        .btn-danger:hover {
            background-color: #dc2626;
        }

        .btn-sm {
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
        }

        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .form-control, .form-select {
            padding: 0.625rem 1rem;
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
            background-color: white;
            color: var(--dark-color);
            width: 100%;
            font-size: 0.875rem;
            transition: var(--transition);
        }

        .form-control:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(92, 106, 196, 0.2);
        }

        .input-group {
            display: flex;
            position: relative;
        }

        .input-group-text {
            display: flex;
            align-items: center;
            padding: 0.625rem;
            background-color: #f9fafb;
            border: 1px solid var(--border-color);
            border-right: 0;
            border-radius: 0.5rem 0 0 0.5rem;
            color: var(--secondary-color);
        }

        .input-group .form-control {
            border-radius: 0 0.5rem 0.5rem 0;
        }

        .table-container {
            overflow-x: auto;
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.875rem;
        }

        .table th {
            background-color: #f9fafb;
            font-weight: 600;
            text-align: left;
            padding: 0.75rem 1rem;
            color: var(--secondary-color);
            border-bottom: 1px solid var(--border-color);
        }

        .table td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-color);
            vertical-align: middle;
        }

        .table tr:last-child td {
            border-bottom: none;
        }

        .table tr:hover {
            background-color: #f9fafb;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-weight: 500;
            font-size: 0.75rem;
            text-transform: uppercase;
        }

        .badge-success {
            background-color: var(--success-light);
            color: var(--success-color);
        }

        .badge-danger {
            background-color: var(--danger-light);
            color: var(--danger-color);
        }

        .transaction-income {
            background-color: var(--success-light);
        }

        .transaction-expense {
            background-color: var(--danger-light);
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .btn-icon {
            width: 2rem;
            height: 2rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.375rem;
            background-color: white;
            color: var(--secondary-color);
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .btn-icon:hover {
            background-color: #f9fafb;
        }

        .btn-icon-primary {
            background-color: var(--primary-light);
            color: var(--primary-color);
            border-color: var(--primary-light);
        }

        .btn-icon-primary:hover {
            background-color: rgba(92, 106, 196, 0.2);
        }

        .btn-icon-danger {
            background-color: var(--danger-light);
            color: var(--danger-color);
            border-color: var(--danger-light);
        }

        .btn-icon-danger:hover {
            background-color: rgba(239, 68, 68, 0.2);
        }

        .pagination {
            display: flex;
            justify-content: center;
            list-style: none;
            padding: 0;
            margin-top: 1.5rem;
        }

        .page-item {
            margin: 0 0.25rem;
        }

        .page-link {
            display: block;
            padding: 0.5rem 0.75rem;
            border-radius: 0.375rem;
            border: 1px solid var(--border-color);
            color: var(--dark-color);
            text-decoration: none;
            transition: var(--transition);
        }

        .page-link:hover {
            background-color: #f9fafb;
        }

        .page-item.active .page-link {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }

        .page-item.disabled .page-link {
            color: #9ca3af;
            pointer-events: none;
            background-color: white;
        }

        .modal-content {
            border-radius: 0.75rem;
            border: none;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }

        .modal-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-title {
            font-weight: 600;
            font-size: 1.125rem;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border-color);
        }

        .modal-header-create {
            background-color: var(--success-color);
            color: white;
        }

        .modal-header-edit {
            background-color: var(--primary-color);
            color: white;
        }

        .modal-header-delete {
            background-color: var(--danger-color);
            color: white;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            font-size: 0.875rem;
            color: var(--secondary-color);
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-check {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .form-check-input {
            width: 1rem;
            height: 1rem;
            margin-top: 0;
        }

        .form-text {
            font-size: 0.75rem;
            color: var(--secondary-color);
            margin-top: 0.25rem;
        }

        .footer {
            text-align: center;
            font-size: 0.875rem;
            color: var(--secondary-color);
            padding: 1.5rem 0;
            border-top: 1px solid var(--border-color);
        }

        /* Responsive adjustments */
        @media (max-width: 992px) {
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .navigation {
                width: 100%;
                justify-content: space-between;
            }
        }

        @media (max-width: 768px) {
            .summary-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .nav-list {
                flex-wrap: wrap;
            }
        }

        @media (max-width: 576px) {
            .summary-grid {
                grid-template-columns: 1fr;
            }

            .filter-row {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
<div class="app-container">
    <header class="header">
        <div class="brand">
            <i class="bi bi-wallet2 brand-icon"></i>
            <h1 class="brand-title" data-lang="app_title">Домашняя бухгалтерия</h1>
        </div>
        <div class="navigation">
            <nav>
                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="/v2/dashboard" data-lang="nav_dashboard">Дашборд</a>
                    </li>
                    <li class="nav-item">
                        <a href="/v2/calendar" data-lang="nav_calendar">Календарь</a>
                    </li>
                    <li class="nav-item">
                        <a href="/v2/reference/category" data-lang="nav_categories">Категории</a>
                    </li>
                    <li class="nav-item">
                        <a href="/v2" class="active" data-lang="nav_transactions">Операции</a>
                    </li>
                    <li class="nav-item">
                        <a href="/v2/auth" data-lang="nav_account">Аккаунт</a>
                    </li>
                </ul>
            </nav>
            <div class="language-selector">
                <button class="language-btn" onclick="changeLanguage('en')" title="English">
                    <img src="https://flagcdn.com/w40/gb.png" alt="English">
                </button>
                <button class="language-btn active" onclick="changeLanguage('ru')" title="Русский">
                    <img src="https://flagcdn.com/w40/ru.png" alt="Русский">
                </button>
                <button class="language-btn" onclick="changeLanguage('th')" title="ไทย">
                    <img src="https://flagcdn.com/w40/th.png" alt="ไทย">
                </button>
            </div>
        </div>
    </header>

    <!-- Summary Cards -->
    <div class="summary-grid">
        <div class="summary-card">
            <h3 class="summary-title" data-lang="summary_income">Доходы</h3>
            <p class="summary-value income-value">+75,000 ₽</p>
        </div>
        <div class="summary-card">
            <h3 class="summary-title" data-lang="summary_expenses">Расходы</h3>
            <p class="summary-value expense-value">-42,350 ₽</p>
        </div>
        <div class="summary-card">
            <h3 class="summary-title" data-lang="summary_balance">Баланс</h3>
            <p class="summary-value balance-value">32,650 ₽</p>
        </div>
        <div class="summary-card">
            <h3 class="summary-title" data-lang="summary_transactions">Операций</h3>
            <p class="summary-value count-value">24</p>
        </div>
    </div>

    <!-- Main Section -->
    <section class="section">
        <div class="section-header">
            <h2 class="section-title" data-lang="transactions_title">Учет расходов и доходов</h2>
            <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addTransactionModal">
                <i class="bi bi-plus-lg"></i> <span data-lang="add_transaction">Добавить операцию</span>
            </button>
        </div>

        <div class="filter-row">
            <div class="input-group">
                <span class="input-group-text"><i class="bi bi-search"></i></span>
                <input type="text" class="form-control" data-lang-placeholder="search_transactions"
                       placeholder="Поиск операций...">
            </div>
            <select class="form-select">
                <option value="all" data-lang="filter_all_types">Все типы</option>
                <option value="income" data-lang="filter_income">Доходы</option>
                <option value="expense" data-lang="filter_expense">Расходы</option>
            </select>
            <select class="form-select">
                <option value="all" data-lang="filter_all_categories">Все категории</option>
                <option value="salary" data-lang="income_salary">Зарплата</option>
                <option value="freelance" data-lang="income_freelance">Подработка</option>
                <option value="groceries" data-lang="expense_groceries">Продукты</option>
                <option value="utilities" data-lang="expense_utilities">Коммунальные услуги</option>
                <option value="transport" data-lang="expense_transport">Транспорт</option>
                <option value="entertainment" data-lang="expense_entertainment">Развлечения</option>
                <option value="health" data-lang="expense_health">Здоровье</option>
            </select>
            <input type="text" class="form-control date-range-picker" data-lang-placeholder="date_range"
                   placeholder="Период дат">
        </div>

        <div class="table-container">
            <table class="table">
                <thead>
                <tr>
                    <th scope="col" width="5%">#</th>
                    <th scope="col" width="12%" data-lang="table_date">Дата</th>
                    <th scope="col" width="10%" data-lang="table_type">Тип</th>
                    <th scope="col" width="15%" data-lang="table_category">Категория</th>
                    <th scope="col" width="12%" data-lang="table_amount">Сумма</th>
                    <th scope="col" width="31%" data-lang="table_description">Описание</th>
                    <th scope="col" width="15%" data-lang="table_actions">Действия</th>
                </tr>
                </thead>
                <tbody>
                <!-- Доходы -->
                <tr>
                    <td>1</td>
                    <td>15.05.2025</td>
                    <td><span class="badge badge-success" data-lang="income">Доход</span></td>
                    <td data-lang="income_salary">Зарплата</td>
                    <td class="income-value">+45,000 ₽</td>
                    <td data-lang="salary_may">Зарплата за май</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon btn-icon-primary" data-bs-toggle="modal"
                                    data-bs-target="#editTransactionModal">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn-icon btn-icon-danger" data-bs-toggle="modal"
                                    data-bs-target="#deleteTransactionModal">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>10.05.2025</td>
                    <td><span class="badge badge-success" data-lang="income">Доход</span></td>
                    <td data-lang="income_freelance">Подработка</td>
                    <td class="income-value">+15,000 ₽</td>
                    <td data-lang="freelance_project">Проект для клиента</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon btn-icon-primary" data-bs-toggle="modal"
                                    data-bs-target="#editTransactionModal">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn-icon btn-icon-danger" data-bs-toggle="modal"
                                    data-bs-target="#deleteTransactionModal">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>05.05.2025</td>
                    <td><span class="badge badge-success" data-lang="income">Доход</span></td>
                    <td data-lang="income_interest">Проценты по вкладам</td>
                    <td class="income-value">+15,000 ₽</td>
                    <td data-lang="bank_interest">Проценты по депозиту</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon btn-icon-primary" data-bs-toggle="modal"
                                    data-bs-target="#editTransactionModal">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn-icon btn-icon-danger" data-bs-toggle="modal"
                                    data-bs-target="#deleteTransactionModal">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>

                <!-- Расходы -->
                <tr>
                    <td>4</td>
                    <td>18.05.2025</td>
                    <td><span class="badge badge-danger" data-lang="expense">Расход</span></td>
                    <td data-lang="expense_groceries">Продукты</td>
                    <td class="expense-value">-5,200 ₽</td>
                    <td data-lang="weekly_groceries">Еженедельная закупка продуктов</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon btn-icon-primary" data-bs-toggle="modal"
                                    data-bs-target="#editTransactionModal">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn-icon btn-icon-danger" data-bs-toggle="modal"
                                    data-bs-target="#deleteTransactionModal">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>15.05.2025</td>
                    <td><span class="badge badge-danger" data-lang="expense">Расход</span></td>
                    <td data-lang="expense_utilities">Коммунальные услуги</td>
                    <td class="expense-value">-8,500 ₽</td>
                    <td data-lang="utilities_may">Коммунальные платежи за май</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon btn-icon-primary" data-bs-toggle="modal"
                                    data-bs-target="#editTransactionModal">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn-icon btn-icon-danger" data-bs-toggle="modal"
                                    data-bs-target="#deleteTransactionModal">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>6</td>
                    <td>12.05.2025</td>
                    <td><span class="badge badge-danger" data-lang="expense">Расход</span></td>
                    <td data-lang="expense_transport">Транспорт</td>
                    <td class="expense-value">-2,500 ₽</td>
                    <td data-lang="transport_taxi">Такси и общественный транспорт</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon btn-icon-primary" data-bs-toggle="modal"
                                    data-bs-target="#editTransactionModal">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn-icon btn-icon-danger" data-bs-toggle="modal"
                                    data-bs-target="#deleteTransactionModal">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>7</td>
                    <td>10.05.2025</td>
                    <td><span class="badge badge-danger" data-lang="expense">Расход</span></td>
                    <td data-lang="expense_entertainment">Развлечения</td>
                    <td class="expense-value">-4,800 ₽</td>
                    <td data-lang="entertainment_cinema">Кино и ужин в ресторане</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon btn-icon-primary" data-bs-toggle="modal"
                                    data-bs-target="#editTransactionModal">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn-icon btn-icon-danger" data-bs-toggle="modal"
                                    data-bs-target="#deleteTransactionModal">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>8</td>
                    <td>08.05.2025</td>
                    <td><span class="badge badge-danger" data-lang="expense">Расход</span></td>
                    <td data-lang="expense_health">Здоровье</td>
                    <td class="expense-value">-3,500 ₽</td>
                    <td data-lang="health_medicine">Лекарства и визит к врачу</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon btn-icon-primary" data-bs-toggle="modal"
                                    data-bs-target="#editTransactionModal">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn-icon btn-icon-danger" data-bs-toggle="modal"
                                    data-bs-target="#deleteTransactionModal">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <nav aria-label="Page navigation">
            <ul class="pagination">
                <li class="page-item disabled">
                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true" data-lang="pagination_prev">Предыдущая</a>
                </li>
                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item">
                    <a class="page-link" href="#" data-lang="pagination_next">Следующая</a>
                </li>
            </ul>
        </nav>
    </section>

    <!-- Модальное окно для добавления операции -->
    <div class="modal fade" id="addTransactionModal" tabindex="-1" aria-labelledby="addTransactionModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header modal-header-create">
                    <h5 class="modal-title" id="addTransactionModalLabel" data-lang="add_transaction_title">Добавление
                        новой операции</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addTransactionForm">
                        <div class="form-group">
                            <label for="transactionDate" class="form-label" data-lang="transaction_date">Дата</label>
                            <input type="text" class="form-control date-picker" id="transactionDate" required>
                        </div>
                        <div class="form-group">
                            <label for="transactionType" class="form-label" data-lang="transaction_type">Тип
                                операции</label>
                            <select class="form-select" id="transactionType" required>
                                <option value="" data-lang="select_type">Выберите тип</option>
                                <option value="income" data-lang="income">Доход</option>
                                <option value="expense" data-lang="expense">Расход</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="transactionCategory" class="form-label" data-lang="transaction_category">Категория</label>
                            <select class="form-select" id="transactionCategory" required>
                                <option value="" data-lang="select_category">Выберите категорию</option>
                                <optgroup label="Доходы" data-lang="income_group">
                                    <option value="salary" data-lang="income_salary">Зарплата</option>
                                    <option value="freelance" data-lang="income_freelance">Подработка</option>
                                    <option value="interest" data-lang="income_interest">Проценты по вкладам</option>
                                </optgroup>
                                <optgroup label="Расходы" data-lang="expense_group">
                                    <option value="groceries" data-lang="expense_groceries">Продукты</option>
                                    <option value="utilities" data-lang="expense_utilities">Коммунальные услуги</option>
                                    <option value="transport" data-lang="expense_transport">Транспорт</option>
                                    <option value="entertainment" data-lang="expense_entertainment">Развлечения</option>
                                    <option value="health" data-lang="expense_health">Здоровье</option>
                                </optgroup>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="transactionAmount" class="form-label"
                                   data-lang="transaction_amount">Сумма</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="transactionAmount" min="0" step="0.01"
                                       required>
                                <span class="input-group-text">₽</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="transactionDescription" class="form-label" data-lang="transaction_description">Описание</label>
                            <textarea class="form-control" id="transactionDescription" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-lang="cancel">Отмена
                    </button>
                    <button type="submit" form="addTransactionForm" class="btn btn-success" data-lang="add">Добавить
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно для редактирования операции -->
    <div class="modal fade" id="editTransactionModal" tabindex="-1" aria-labelledby="editTransactionModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header modal-header-edit">
                    <h5 class="modal-title" id="editTransactionModalLabel" data-lang="edit_transaction_title">
                        Редактирование операции</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editTransactionForm">
                        <div class="form-group">
                            <label for="editTransactionDate" class="form-label"
                                   data-lang="transaction_date">Дата</label>
                            <input type="text" class="form-control date-picker" id="editTransactionDate"
                                   value="18.05.2025" required>
                        </div>
                        <div class="form-group">
                            <label for="editTransactionType" class="form-label" data-lang="transaction_type">Тип
                                операции</label>
                            <select class="form-select" id="editTransactionType" required>
                                <option value="income" data-lang="income">Доход</option>
                                <option value="expense" selected data-lang="expense">Расход</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editTransactionCategory" class="form-label" data-lang="transaction_category">Категория</label>
                            <select class="form-select" id="editTransactionCategory" required>
                                <optgroup label="Доходы" data-lang="income_group">
                                    <option value="salary" data-lang="income_salary">Зарплата</option>
                                    <option value="freelance" data-lang="income_freelance">Подработка</option>
                                    <option value="interest" data-lang="income_interest">Проценты по вкладам</option>
                                </optgroup>
                                <optgroup label="Расходы" data-lang="expense_group">
                                    <option value="groceries" selected data-lang="expense_groceries">Продукты</option>
                                    <option value="utilities" data-lang="expense_utilities">Коммунальные услуги</option>
                                    <option value="transport" data-lang="expense_transport">Транспорт</option>
                                    <option value="entertainment" data-lang="expense_entertainment">Развлечения</option>
                                    <option value="health" data-lang="expense_health">Здоровье</option>
                                </optgroup>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editTransactionAmount" class="form-label"
                                   data-lang="transaction_amount">Сумма</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="editTransactionAmount" value="5200"
                                       min="0" step="0.01" required>
                                <span class="input-group-text">₽</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="editTransactionDescription" class="form-label"
                                   data-lang="transaction_description">Описание</label>
                            <textarea class="form-control" id="editTransactionDescription" rows="3">Еженедельная закупка продуктов</textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-lang="cancel">Отмена
                    </button>
                    <button type="submit" form="editTransactionForm" class="btn btn-primary" data-lang="save">
                        Сохранить
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно для удаления операции -->
    <div class="modal fade" id="deleteTransactionModal" tabindex="-1" aria-labelledby="deleteTransactionModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header modal-header-delete">
                    <h5 class="modal-title" id="deleteTransactionModalLabel" data-lang="delete_transaction_title">
                        Удаление операции</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p><span data-lang="delete_transaction_confirmation">Вы действительно хотите удалить операцию</span>
                        <strong>"<span data-lang="weekly_groceries">Еженедельная закупка продуктов</span>"</strong>
                        <span data-lang="amount_of">на сумму</span> <strong>5,200 ₽</strong>?</p>
                    <p class="text-danger" data-lang="delete_warning">Это действие нельзя будет отменить.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-lang="cancel">Отмена
                    </button>
                    <button type="button" class="btn btn-danger" data-lang="delete">Удалить</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        &copy; 2025 <span data-lang="app_title">Домашняя бухгалтерия</span>
    </footer>
</div>

<!-- Bootstrap JS Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Flatpickr JS -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<!-- Локализация для Flatpickr -->
<script src="https://npmcdn.com/flatpickr/dist/l10n/ru.js"></script>
<script src="https://npmcdn.com/flatpickr/dist/l10n/th.js"></script>

<!-- Локализация -->
<script>
    // Словари для разных языков
    const dictionaries = {
        ru: {
            // Общие
            app_title: "Домашняя бухгалтерия",
            nav_categories: "Категории",
            nav_transactions: "Операции",
            nav_account: "Аккаунт",

            // Сводка
            summary_income: "Доходы",
            summary_expenses: "Расходы",
            summary_balance: "Баланс",
            summary_transactions: "Операций",

            // Заголовки и фильтры
            transactions_title: "Учет расходов и доходов",
            add_transaction: "Добавить операцию",
            search_transactions: "Поиск операций...",
            filter_all_types: "Все типы",
            filter_income: "Доходы",
            filter_expense: "Расходы",
            filter_all_categories: "Все категории",
            date_range: "Период дат",

            // Таблица
            table_date: "Дата",
            table_type: "Тип",
            table_category: "Категория",
            table_amount: "Сумма",
            table_description: "Описание",
            table_actions: "Действия",

            // Типы операций
            income: "Доход",
            expense: "Расход",

            // Категории доходов
            income_group: "Доходы",
            income_salary: "Зарплата",
            income_freelance: "Подработка",
            income_interest: "Проценты по вкладам",

            // Категории расходов
            expense_group: "Расходы",
            expense_groceries: "Продукты",
            expense_utilities: "Коммунальные услуги",
            expense_transport: "Транспорт",
            expense_entertainment: "Развлечения",
            expense_health: "Здоровье",

            // Описания операций
            salary_may: "Зарплата за май",
            freelance_project: "Проект для клиента",
            bank_interest: "Проценты по депозиту",
            weekly_groceries: "Еженедельная закупка продуктов",
            utilities_may: "Коммунальные платежи за май",
            transport_taxi: "Такси и общественный транспорт",
            entertainment_cinema: "Кино и ужин в ресторане",
            health_medicine: "Лекарства и визит к врачу",

            // Пагинация
            pagination_prev: "Предыдущая",
            pagination_next: "Следующая",

            // Модальные окна
            add_transaction_title: "Добавление новой операции",
            edit_transaction_title: "Редактирование операции",
            delete_transaction_title: "Удаление операции",
            transaction_date: "Дата",
            transaction_type: "Тип операции",
            transaction_category: "Категория",
            transaction_amount: "Сумма",
            transaction_description: "Описание",
            select_type: "Выберите тип",
            select_category: "Выберите категорию",
            cancel: "Отмена",
            add: "Добавить",
            save: "Сохранить",
            delete: "Удалить",
            delete_transaction_confirmation: "Вы действительно хотите удалить операцию",
            amount_of: "на сумму",
            delete_warning: "Это действие нельзя будет отменить."
        },
        en: {
            // General
            app_title: "Home Accounting",
            nav_categories: "Categories",
            nav_transactions: "Transactions",
            nav_account: "Account",

            // Summary
            summary_income: "Income",
            summary_expenses: "Expenses",
            summary_balance: "Balance",
            summary_transactions: "Transactions",

            // Headers and filters
            transactions_title: "Income and Expense Tracking",
            add_transaction: "Add Transaction",
            search_transactions: "Search transactions...",
            filter_all_types: "All types",
            filter_income: "Income",
            filter_expense: "Expenses",
            filter_all_categories: "All categories",
            date_range: "Date range",

            // Table
            table_date: "Date",
            table_type: "Type",
            table_category: "Category",
            table_amount: "Amount",
            table_description: "Description",
            table_actions: "Actions",

            // Transaction types
            income: "Income",
            expense: "Expense",

            // Income categories
            income_group: "Income",
            income_salary: "Salary",
            income_freelance: "Freelance",
            income_interest: "Interest",

            // Expense categories
            expense_group: "Expenses",
            expense_groceries: "Groceries",
            expense_utilities: "Utilities",
            expense_transport: "Transportation",
            expense_entertainment: "Entertainment",
            expense_health: "Healthcare",

            // Transaction descriptions
            salary_may: "May salary",
            freelance_project: "Client project",
            bank_interest: "Deposit interest",
            weekly_groceries: "Weekly grocery shopping",
            utilities_may: "May utility bills",
            transport_taxi: "Taxi and public transport",
            entertainment_cinema: "Cinema and dinner at restaurant",
            health_medicine: "Medicine and doctor visit",

            // Pagination
            pagination_prev: "Previous",
            pagination_next: "Next",

            // Modal windows
            add_transaction_title: "Add New Transaction",
            edit_transaction_title: "Edit Transaction",
            delete_transaction_title: "Delete Transaction",
            transaction_date: "Date",
            transaction_type: "Transaction Type",
            transaction_category: "Category",
            transaction_amount: "Amount",
            transaction_description: "Description",
            select_type: "Select type",
            select_category: "Select category",
            cancel: "Cancel",
            add: "Add",
            save: "Save",
            delete: "Delete",
            delete_transaction_confirmation: "Are you sure you want to delete the transaction",
            amount_of: "with amount",
            delete_warning: "This action cannot be undone."
        },
        th: {
            // ทั่วไป
            app_title: "บัญชีครัวเรือน",
            nav_categories: "หมวดหมู่",
            nav_transactions: "ธุรกรรม",
            nav_account: "บัญชีผู้ใช้",

            // สรุป
            summary_income: "รายรับ",
            summary_expenses: "รายจ่าย",
            summary_balance: "ยอดคงเหลือ",
            summary_transactions: "ธุรกรรม",

            // หัวข้อและตัวกรอง
            transactions_title: "การติดตามรายรับและรายจ่าย",
            add_transaction: "เพิ่มธุรกรรม",
            search_transactions: "ค้นหาธุรกรรม...",
            filter_all_types: "ทุกประเภท",
            filter_income: "รายรับ",
            filter_expense: "รายจ่าย",
            filter_all_categories: "ทุกหมวดหมู่",
            date_range: "ช่วงวันที่",

            // ตาราง
            table_date: "วันที่",
            table_type: "ประเภท",
            table_category: "หมวดหมู่",
            table_amount: "จำนวนเงิน",
            table_description: "คำอธิบาย",
            table_actions: "การดำเนินการ",

            // ประเภทธุรกรรม
            income: "รายรับ",
            expense: "รายจ่าย",

            // หมวดหมู่รายรับ
            income_group: "รายรับ",
            income_salary: "เงินเดือน",
            income_freelance: "งานอิสระ",
            income_interest: "ดอกเบี้ย",

            // หมวดหมู่รายจ่าย
            expense_group: "รายจ่าย",
            expense_groceries: "ของชำ",
            expense_utilities: "สาธารณูปโภค",
            expense_transport: "การเดินทาง",
            expense_entertainment: "ความบันเทิง",
            expense_health: "สุขภาพ",

            // คำอธิบายธุรกรรม
            salary_may: "เงินเดือนเดือนพฤษภาคม",
            freelance_project: "โครงการลูกค้า",
            bank_interest: "ดอกเบี้ยเงินฝาก",
            weekly_groceries: "ซื้อของชำประจำสัปดาห์",
            utilities_may: "ค่าสาธารณูปโภคเดือนพฤษภาคม",
            transport_taxi: "แท็กซี่และขนส่งสาธารณะ",
            entertainment_cinema: "ภาพยนตร์และอาหารเย็นที่ร้านอาหาร",
            health_medicine: "ยาและการไปพบแพทย์",

            // การแบ่งหน้า
            pagination_prev: "ก่อนหน้า",
            pagination_next: "ถัดไป",

            // หน้าต่างโมดัล
            add_transaction_title: "เพิ่มธุรกรรมใหม่",
            edit_transaction_title: "แก้ไขธุรกรรม",
            delete_transaction_title: "ลบธุรกรรม",
            transaction_date: "วันที่",
            transaction_type: "ประเภทธุรกรรม",
            transaction_category: "หมวดหมู่",
            transaction_amount: "จำนวนเงิน",
            transaction_description: "คำอธิบาย",
            select_type: "เลือกประเภท",
            select_category: "เลือกหมวดหมู่",
            cancel: "ยกเลิก",
            add: "เพิ่ม",
            save: "บันทึก",
            delete: "ลบ",
            delete_transaction_confirmation: "คุณแน่ใจหรือไม่ว่าต้องการลบธุรกรรม",
            amount_of: "ที่มีจำนวนเงิน",
            delete_warning: "การกระทำนี้ไม่สามารถยกเลิกได้"
        }
    };

    // Текущий язык (по умолчанию русский)
    let currentLang = 'ru';

    // Функция для изменения языка
    function changeLanguage(lang) {
        if (!dictionaries[lang]) return;

        currentLang = lang;

        // Обновляем атрибут lang у html
        document.documentElement.lang = lang;

        // Обновляем активную кнопку языка
        document.querySelectorAll('.language-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        document.querySelector(`.language-btn[onclick="changeLanguage('${lang}')"]`).classList.add('active');

        // Обновляем все элементы с атрибутом data-lang
        document.querySelectorAll('[data-lang]').forEach(element => {
            const key = element.getAttribute('data-lang');
            if (dictionaries[lang][key]) {
                element.textContent = dictionaries[lang][key];
            }
        });

        // Обновляем плейсхолдеры
        document.querySelectorAll('[data-lang-placeholder]').forEach(element => {
            const key = element.getAttribute('data-lang-placeholder');
            if (dictionaries[lang][key]) {
                element.placeholder = dictionaries[lang][key];
            }
        });

        // Обновляем опции в select
        document.querySelectorAll('option[data-lang]').forEach(option => {
            const key = option.getAttribute('data-lang');
            if (dictionaries[lang][key]) {
                option.textContent = dictionaries[lang][key];
            }
        });

        // Обновляем optgroup в select
        document.querySelectorAll('optgroup[data-lang]').forEach(optgroup => {
            const key = optgroup.getAttribute('data-lang');
            if (dictionaries[lang][key]) {
                optgroup.label = dictionaries[lang][key];
            }
        });

        // Обновляем локализацию для выбора даты
        if (flatpickr && flatpickrInstances) {
            let locale = 'default';
            if (lang === 'ru') locale = 'ru';
            if (lang === 'th') locale = 'th';

            flatpickrInstances.forEach(instance => {
                instance.set('locale', locale);
            });
        }
    }

    // Инициализация выбора даты
    let flatpickrInstances = [];

    document.addEventListener('DOMContentLoaded', function () {
        // Инициализация выбора даты
        const datePickers = document.querySelectorAll('.date-picker');
        datePickers.forEach(picker => {
            const instance = flatpickr(picker, {
                dateFormat: "d.m.Y",
                locale: "ru",
                allowInput: true
            });
            flatpickrInstances.push(instance);
        });

        // Инициализация выбора диапазона дат
        const dateRangePickers = document.querySelectorAll('.date-range-picker');
        dateRangePickers.forEach(picker => {
            const instance = flatpickr(picker, {
                mode: "range",
                dateFormat: "d.m.Y",
                locale: "ru",
                allowInput: true
            });
            flatpickrInstances.push(instance);
        });

        // Проверяем, есть ли сохраненный язык в localStorage
        const savedLang = localStorage.getItem('preferredLanguage');
        if (savedLang && dictionaries[savedLang]) {
            changeLanguage(savedLang);
        } else {
            // Если нет сохраненного языка, используем язык браузера или русский по умолчанию
            const browserLang = navigator.language.split('-')[0];
            if (dictionaries[browserLang]) {
                changeLanguage(browserLang);
            } else {
                changeLanguage('ru');
            }
        }
    });

    // Сохраняем выбранный язык в localStorage при изменении
    const originalChangeLanguage = changeLanguage;
    changeLanguage = function (lang) {
        originalChangeLanguage(lang);
        localStorage.setItem('preferredLanguage', lang);
    };
</script>
</body>
</html>